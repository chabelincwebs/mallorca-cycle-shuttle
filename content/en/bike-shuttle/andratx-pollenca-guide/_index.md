---
title: "Master Cycling Guide: Andratx to Pollença"
description: "Complete guide for cycling from Andratx to Pollença through the Tramuntana mountains"
---

<p class="header-subtitle">
We are not saying it's easy. We are not saying it's for everyone.
</p>

<div class="hero-intro-banner">
<div class="hero-intro-content">
<p class="hero-intro-centered fade-in-up">
We are saying that it's <strong>brilliant</strong>.
</p>
<p class="hero-intro-main fade-in-up delay-1">
For your <a href="#north-routes" class="highlight-red hero-link">"Best Ever Day On A Bike"</a> ride <strong>Port d'Andratx</strong> to <strong>Port de Pollença</strong> through Mallorca's stunning <span class="highlight">Serra de Tramuntana</span> mountains for the ultimate <a href="#south-routes" class="highlight-red hero-link">Coast-to-Coast</a>
</p>
<p class="hero-intro-features fade-in-up delay-2">
Scenic challenging climbs • Sweeping descents • Butter smooth tarmac • Regular café stops • Cycling paradise
</p>
</div>
</div>

<style>
/* Center Page Title */
h1 {
  text-align: center;
  margin-bottom: 1rem;
}

/* Header Subtitle - Below Title */
.header-subtitle {
  font-size: 1.25rem;
  line-height: 1.6;
  color: #555;
  font-weight: 500;
  font-style: italic;
  text-align: center;
  margin: 0 auto 2.5rem auto;
  max-width: 800px;
  letter-spacing: -0.01em;
}

/* Hero Intro Banner - Premium Glassmorphism */
.hero-intro-banner {
  margin: 0 0 4rem 0;
  padding: 1.8rem 2.5rem 3rem 2.5rem;
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: 28px;
  box-shadow: 0 16px 64px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
}

.hero-intro-banner::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(241, 0, 0, 0.06) 0%, rgba(255, 51, 51, 0.02) 100%);
  z-index: 0;
  border-radius: 28px;
}

.hero-intro-banner::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 5px;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(241, 0, 0, 0.6) 20%,
    rgba(241, 0, 0, 1) 50%,
    rgba(241, 0, 0, 0.6) 80%,
    transparent 100%
  );
}

.hero-intro-content {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

/* Italic First Line */
.hero-intro-italic {
  font-size: 1.25rem;
  line-height: 1.6;
  color: #555;
  font-weight: 500;
  font-style: italic;
  text-align: center;
  margin: 0;
  letter-spacing: -0.01em;
}

/* Centered "brilliant" Line */
.hero-intro-centered {
  font-size: 2rem;
  line-height: 1.4;
  font-weight: 800;
  text-align: center;
  margin: 0;
  color: #111;
}

.hero-intro-centered strong {
  background: linear-gradient(135deg, rgba(241, 0, 0, 1) 0%, rgba(255, 51, 51, 0.9) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Main Intro Paragraph */
.hero-intro-main {
  font-size: 1.35rem;
  line-height: 1.7;
  color: #222;
  font-weight: 500;
  text-align: center;
  margin: 0;
  letter-spacing: -0.01em;
}

.hero-intro-main strong {
  font-weight: 700;
  color: #111;
}

.hero-intro-main .highlight {
  background: linear-gradient(135deg, rgba(241, 0, 0, 0.12) 0%, rgba(255, 51, 51, 0.08) 100%);
  padding: 0.15rem 0.5rem;
  border-radius: 6px;
  font-weight: 700;
  color: #111;
}

.hero-intro-main .highlight-red {
  background: linear-gradient(135deg, rgba(241, 0, 0, 1) 0%, rgba(255, 51, 51, 0.95) 100%);
  color: white;
  padding: 0.2rem 0.75rem;
  border-radius: 8px;
  font-weight: 800;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 16px rgba(241, 0, 0, 0.3);
}

/* Hero Links - Clickable Highlights */
.hero-link {
  text-decoration: none;
  display: inline-block;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
}

.hero-link:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(241, 0, 0, 0.4);
}

/* Smooth scroll behavior */
html {
  scroll-behavior: smooth;
}

/* Features Line */
.hero-intro-features {
  font-size: 1.1rem;
  line-height: 1.6;
  color: #555;
  text-align: center;
  margin: 0;
  font-weight: 500;
  letter-spacing: 0.3px;
}

/* Fade-in animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  opacity: 0;
}

.fade-in-up.delay-1 {
  animation-delay: 0.2s;
}

.fade-in-up.delay-2 {
  animation-delay: 0.4s;
}

.fade-in-up.delay-3 {
  animation-delay: 0.6s;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .header-subtitle {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    padding: 0 1rem;
  }

  .hero-intro-banner {
    padding: 1.2rem 1.5rem 2rem 1.5rem;
    margin: 0 0 3rem 0;
  }

  .hero-intro-centered {
    font-size: 1.6rem;
  }

  .hero-intro-main {
    font-size: 1.15rem;
  }

  .hero-intro-main .highlight-red {
    font-size: 1rem;
    padding: 0.15rem 0.5rem;
  }
}
</style>

<!-- INFO CARDS GRID -->
<div class="info-cards-wrapper">
<div class="info-cards-grid">

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">📸</span>
<span class="card-toggle">+</span>
</div>
<h3>Snapshot</h3>
</div>
<div class="info-card-content">
<p><strong>Why this route:</strong> Coast-to-coast through the Tramuntana mountain range along the coast on smooth tarmac – Mallorca's best day on a bike. Probably your best day on a bike. Ever.</p>
<p><strong>How it works:</strong> Bus out, bike back. Take the scheduled bike bus to Port d'Andratx (or the reverse to Port de Pollença), ride one of the suggested or your own custom route back.</p>
<p><strong>Scheduled services:</strong> We take care of the logistics, you take care of relaxing into the best Mallorca has to offer. Book the <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">scheduled bike bus</a> from any of the departure locations on the booking platform.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">🔑</span>
<span class="card-toggle">+</span>
</div>
<h3>Key Sections</h3>
</div>
<div class="info-card-content">
<p><strong>Estellencs to Deià:</strong> Coastal beauty.</p>
<p><strong>Banyalbufar:</strong> Enough said.</p>
<p><strong>Puig Major (from Sóller):</strong> 14 km @ 6.2%, ~828 m. Long, steady; lit tunnel(s) then aqueduct.</p>
<p><strong>Coll dels Reis / Sa Calobra:</strong> Optional add-on – descend to port, climb back; bucket-list hairpins.</p>
<p><strong>Port Valldemossa & Port des Canonge:</strong> Short, steep, scenic dead-end descents and returns; "mini Sa Calobra" feel without the traffic.</p>
<p><strong>Coll de Sa Bataia (from Lluc side):</strong> Leads to Caimari descent and lanes to the bay road.</p>
<p><strong>Coll de Sóller (alt. line):</strong> Winding classic if avoiding the MA-10 high route.</p>
<p><strong>Coll de Femenia (north side):</strong> Gateway climb leaving Pollença toward Lluc.</p>
<p><strong>Coll de Femenia (north side):</strong> Gateway F1 style descent from Lluc to Pollença.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">☕</span>
<span class="card-toggle">+</span>
</div>
<h3>Café/Refuel Stops</h3>
</div>
<div class="info-card-content">
<p><em>km estimates from Andratx</em></p>
<p><strong>Es Grau (≈13 km):</strong> Balcony views over the cliffs; quick coffee.</p>
<p><strong>Estellencs (≈17 km):</strong> "Cafetería Estellencs" – Simple, handy, right on MA-10.</p>
<p><strong>Banyalbufar (≈24 km):</strong> Son Tomás (range + views) or Bellavista (great views; watch the bikes).</p>
<p><strong>Valldemossa (≈39 km):</strong> Multiple options; Ca'n Molinas for Cocas de Patata with hot chocolate.</p>
<p><strong>Deià (≈48 km):</strong> Bakery in the supermarket run by Marc & Vincent Reynés; their café in Port de Sóller too.</p>
<p><strong>Sóller (≈58 km) – Sa Frontera:</strong> Solid menu before Puig Major.</p>
<p><strong>Port de Sóller (detour):</strong> Waterfront options; Reynés Cycling Café for cake/coffee.</p>
<p><strong>Aqueduct / Sa Calobra turn (≈80 km):</strong> OJ Shack – fresh orange juice + on-bike snacks.</p>
<p><strong>Lluc / Coll de sa Bataia top (≈89 km):</strong> Repsol + café or Lluc Monastery – quick or sit-down.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">💡</span>
<span class="card-toggle">+</span>
</div>
<h3>Good to Know</h3>
</div>
<div class="info-card-content">
<ul>
<li>Book for early in your trip whilst legs are still fresh & even with 308 days of sun each year, if weather causes a cancellation, you still have an alternate day.</li>
<li>Seats are limited. Book early.</li>
<li>This will be without a doubt your best day in Mallorca.</li>
<li>Arrive 10 minutes early for bike packing on the day.</li>
<li>It's an early start, plenty of places for breakfast, coffee, toilet on arrival.</li>
<li><strong>Rescue cover:</strong> <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">Peace of mind</a>. Strongly advised. Bikes and bodies do sometimes break down.</li>
<li>Safe loading of bikes in the trailers: Packed between mattresses – secure and safe.</li>
<li>Average return time is just over 6 hours plus stops on the vanilla (shortest) route.</li>
<li>Cafe stops appear regularly, choices are never more than an hour apart.</li>
<li>Regular fuelling is essential.</li>
</ul>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">📅</span>
<span class="card-toggle">+</span>
</div>
<h3>Schedule</h3>
</div>
<div class="info-card-content">
<p>Use the bike bus to Port d'Andratx from Port de Pollença/Alcúdia/Playa de Muro and from Peguera, Playa de Palma & Santa Ponsa to Port de Pollença.</p>
<p><a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer" class="cta">View Schedule & Book →</a></p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">⭐</span>
<span class="card-toggle">+</span>
</div>
<h3>Social Proof</h3>
</div>
<div class="info-card-content">
<p><strong>"18 Swedish ladies" testimonial (2016):</strong> 162 km Big Daddy day called "best ever day on a bike" – loved Canonge, Valldemossa, Sa Calobra; tunnels lit; fast finish to Pollença. Returning the next season.</p>
<p><strong>John McCracken (spring 2025):</strong> One-way format lets you enjoy the scenery without turning it into an ultra-distance day; highlights: Gramola start, MA-10 cliff sections, Monnàber tunnel approach to Puig Major, Femenia descent "let go."</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">📊</span>
<span class="card-toggle">+</span>
</div>
<h3>Key Stats</h3>
</div>
<div class="info-card-content">
<p><strong>Signature climb:</strong> Puig Major from Sóller (southbound) – 14 km @ 6.2% (≈828 m).</p>
<p><strong>Signature descent:</strong> Puig Major to Sóller (northbound) – 14 km @ 6.2% (≈828 m).</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">📷</span>
<span class="card-toggle">+</span>
</div>
<h3>Memory Maker!</h3>
</div>
<div class="info-card-content">
<p><strong>Port de Valldemossa:</strong> Mini & maybe better? version of Sa Calobra (down & back).</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">🍰</span>
<span class="card-toggle">+</span>
</div>
<h3>Quick Fuel Tips</h3>
</div>
<div class="info-card-content">
<p><strong>Quick fuel to get you home:</strong> OJ shack at the aqueduct or Sa Bataia café/garage (going North), Estellencs (going South).</p>
<p><strong>Scenic fuel:</strong> Banyalbufar & Deià.</p>
<p><strong>Soller is approximately halfway.</strong></p>
<p><strong>Cafes are never more than an hour apart.</strong></p>
</div>
</div>

<div class="info-card" onclick="window.open('https://mallorcacycleshuttle.company.site/products/Andratx-Pollenca-Finishers-Unisex-Classic-T-p788401800', '_blank')" style="cursor: pointer;">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">👕</span>
<span class="card-toggle">+</span>
</div>
<h3>Finisher's Gear</h3>
</div>
<div class="info-card-content">
<p><strong>Celebrate your achievement!</strong></p>
<p>Get your exclusive Port d'Andratx-Port de Pollença finisher's t-shirt and show the world you conquered this epic route.</p>
<p style="color: var(--brand, #f10000); font-weight: 700; margin-top: 1rem;">Shop Now →</p>
</div>
</div>

<div class="info-card" onclick="window.open('https://mallorcacycleshuttle.company.site/products/Departure-towns-c28971057', '_blank')" style="cursor: pointer;">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">🚌</span>
<span class="card-toggle">+</span>
</div>
<h3>Book Your Shuttle</h3>
</div>
<div class="info-card-content">
<p><strong>Need a ride to start your adventure?</strong></p>
<p>Browse all departure towns and book your shuttle to Port d'Andratx or Port de Pollença. We've got you covered!</p>
<p style="color: var(--brand, #f10000); font-weight: 700; margin-top: 1rem;">View Shuttles →</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span style="font-size: 1.5rem;">📋</span>
<span class="card-toggle">+</span>
</div>
<h3>Coming Soon</h3>
</div>
<div class="info-card-content">
<p><strong>More information coming soon...</strong></p>
<p>Check back later for additional resources and tips for your Port d'Andratx-Port de Pollença adventure.</p>
</div>
</div>

</div>
</div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
/* Info Cards Wrapper */
.info-cards-wrapper {
  margin: 2rem 0 3rem 0;
  padding: 2rem;
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f1f3f5 100%);
  border-radius: 24px;
  position: relative;
}

.info-cards-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    radial-gradient(circle at 20% 50%, rgba(241, 0, 0, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(255, 51, 51, 0.02) 0%, transparent 50%);
  border-radius: 24px;
  pointer-events: none;
}

/* Info Cards Grid */
.info-cards-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem;
  position: relative;
  z-index: 1;
}

@media (min-width: 768px) {
  .info-cards-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1.75rem;
  }
}

@media (min-width: 1024px) {
  .info-cards-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }
}

/* Hide all cards when one is expanded */
.info-cards-grid.has-expanded .info-card {
  display: none;
}

/* Show only the expanded card */
.info-cards-grid.has-expanded .info-card.expanded {
  display: block;
}

/* Routes 2-Column Layout - Premium Wrapper */
.routes-2col-wrapper {
  display: grid;
  grid-template-columns: 1fr;
  gap: 3rem;
  margin: 3rem 0 2rem 0;
  padding: 2.5rem;
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f1f3f5 100%);
  border-radius: 28px;
  position: relative;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.04);
}

.routes-2col-wrapper::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    radial-gradient(circle at 30% 40%, rgba(241, 0, 0, 0.04) 0%, transparent 50%),
    radial-gradient(circle at 70% 70%, rgba(255, 51, 51, 0.03) 0%, transparent 50%);
  border-radius: 28px;
  pointer-events: none;
}

@media (min-width: 768px) {
  .routes-2col-wrapper {
    grid-template-columns: repeat(2, 1fr);
    gap: 3rem;
  }
}

.routes-column {
  display: flex;
  flex-direction: column;
  gap: 0;
  position: relative;
  z-index: 1;
}

/* Hide all routes when one is expanded */
.routes-2col-wrapper.has-expanded .route-item {
  display: none;
}

/* Show only the expanded route */
.routes-2col-wrapper.has-expanded .route-item.active {
  display: block;
}

/* Make the column containing the active route span full width */
.routes-2col-wrapper.has-expanded .routes-column:has(.route-item.active) {
  grid-column: 1 / -1;
}

/* Hide empty columns when a route is expanded */
.routes-2col-wrapper.has-expanded .routes-column:not(:has(.route-item.active)) {
  display: none;
}

.info-card {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  border-radius: 20px;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
  position: relative;
}

.info-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(241, 0, 0, 0.05) 0%, rgba(255, 51, 51, 0.02) 100%);
  opacity: 0;
  transition: opacity 0.4s ease;
  z-index: 0;
  border-radius: 20px;
}

.info-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 48px rgba(241, 0, 0, 0.15);
  border-color: rgba(241, 0, 0, 0.2);
}

.info-card:hover::before {
  opacity: 1;
}

.info-card.expanded {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: 0 16px 64px rgba(241, 0, 0, 0.2);
  border-color: rgba(241, 0, 0, 0.3);
  grid-column: 1 / -1;
  transform: scale(1.02);
}

.info-card.expanded::before {
  opacity: 1;
}

.info-card-header {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 1.5rem 1.5rem 1.25rem 1.5rem;
  user-select: none;
  position: relative;
  z-index: 1;
}

.info-card-header-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  position: relative;
}

/* Floating Icon Badge - Top Right */
.info-card-header-top > span:first-child {
  position: absolute;
  top: -0.5rem;
  right: -0.5rem;
  width: 56px;
  height: 56px;
  background: linear-gradient(135deg, rgba(241, 0, 0, 0.9) 0%, rgba(255, 51, 51, 0.85) 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  box-shadow: 0 4px 16px rgba(241, 0, 0, 0.3);
  border: 3px solid rgba(255, 255, 255, 0.9);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 2;
}

.info-card:hover .info-card-header-top > span:first-child {
  transform: rotate(12deg) scale(1.1);
  box-shadow: 0 6px 24px rgba(241, 0, 0, 0.4);
}

.info-card.expanded .info-card-header-top > span:first-child {
  transform: scale(1.15);
  background: linear-gradient(135deg, rgba(241, 0, 0, 1) 0%, rgba(255, 51, 51, 0.95) 100%);
}

.info-card-header h3 {
  margin: 0;
  font-size: 1.2rem;
  color: #222;
  font-weight: 700;
  padding-right: 3rem;
  line-height: 1.3;
}

.card-toggle {
  font-size: 1.8rem;
  font-weight: 300;
  color: rgba(241, 0, 0, 0.8);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  flex-shrink: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(241, 0, 0, 0.08);
  border-radius: 50%;
  margin-top: -0.25rem;
}

.info-card:hover .card-toggle {
  background: rgba(241, 0, 0, 0.12);
  transform: scale(1.1);
}

.info-card.expanded .card-toggle {
  transform: rotate(45deg) scale(1.15);
  background: rgba(241, 0, 0, 0.15);
  color: rgba(241, 0, 0, 1);
}

.info-card-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), padding 0.5s ease;
  padding: 0 1.5rem;
  position: relative;
  z-index: 1;
}

.info-card.expanded .info-card-content {
  max-height: 2000px;
  padding: 0 1.5rem 1.75rem 1.5rem;
}

.info-card-content p {
  margin: 0 0 0.85rem 0;
  line-height: 1.7;
  color: #333;
  font-size: 0.95rem;
}

.info-card-content p:last-child {
  margin-bottom: 0;
}

.info-card-content strong {
  color: #111;
  font-weight: 700;
}

.info-card-content a {
  color: rgba(241, 0, 0, 0.9);
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  border-bottom: 1px solid rgba(241, 0, 0, 0.3);
}

.info-card-content a:hover {
  color: rgba(241, 0, 0, 1);
  border-bottom-color: rgba(241, 0, 0, 0.6);
}

.info-card-content .cta {
  display: inline-block;
  background: linear-gradient(135deg, rgba(241, 0, 0, 1) 0%, rgba(255, 51, 51, 0.95) 100%);
  color: white;
  padding: 0.85rem 1.75rem;
  border-radius: 12px;
  text-decoration: none;
  font-weight: 700;
  margin-top: 1rem;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 16px rgba(241, 0, 0, 0.25);
  border: none;
  border-bottom: none;
}

.info-card-content .cta:hover {
  background: linear-gradient(135deg, rgba(209, 0, 0, 1) 0%, rgba(241, 0, 0, 1) 100%);
  transform: translateY(-2px);
  box-shadow: 0 6px 24px rgba(241, 0, 0, 0.4);
}

.info-card-content ul {
  margin: 0;
  padding-left: 1.5rem;
}

.info-card-content li {
  margin-bottom: 0.65rem;
  line-height: 1.7;
  color: #333;
  font-size: 0.95rem;
}

/* Finisher's Gear CTA Card - Special Styling */
.info-card-cta {
  background: white;
  border: 2px solid var(--brand, #f10000);
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
  box-shadow: 0 6px 20px rgba(241, 0, 0, 0.15);
  text-decoration: none;
  display: block;
  position: relative;
  grid-column: 1 / -1;
}

.info-card-cta::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(241, 0, 0, 0.03) 0%, transparent 100%);
  pointer-events: none;
}

.info-card-cta:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 30px rgba(241, 0, 0, 0.25);
  border-width: 3px;
}

.info-card-cta .info-card-header {
  background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);
  padding: 1.25rem;
  user-select: none;
}

.info-card-content-cta {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease, padding 0.4s ease;
  padding: 0 1.25rem;
}

.info-card-content-cta p {
  margin: 0 0 0.75rem 0;
  line-height: 1.6;
  color: var(--text);
}

.info-card-content-cta p:last-child {
  margin-bottom: 0;
}

.info-card-content ul {
  margin: 0;
  padding-left: 1.25rem;
  line-height: 1.8;
}

.info-card-content li {
  margin-bottom: 0.5rem;
}

.info-card-content a {
  color: var(--brand);
  text-decoration: underline;
}

.info-card-content a:hover {
  text-decoration: none;
}

/* Accordion Section Headers */
.route-section {
  margin: 3rem 0 1.5rem 0;
  padding: 1.5rem;
  background: linear-gradient(135deg, #f8f8f8 0%, #fff 100%);
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.route-section h2 {
  margin: 0;
  font-size: 1.6rem;
  font-weight: 700;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

/* Accordion Container */
.route-accordion {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  margin: 1.5rem 0 3rem 0;
}

/* Accordion Item - Glassmorphism */
.route-item {
  border: 1px solid rgba(255, 255, 255, 0.4);
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.65);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
  position: relative;
}

.route-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(241, 0, 0, 0.04) 0%, rgba(255, 51, 51, 0.01) 100%);
  opacity: 0;
  transition: opacity 0.4s ease;
  z-index: 0;
  border-radius: 20px;
}

.route-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 48px rgba(241, 0, 0, 0.12);
  border-color: rgba(241, 0, 0, 0.2);
}

.route-item:hover::before {
  opacity: 1;
}

.route-item.active {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-color: rgba(241, 0, 0, 0.3);
  box-shadow: 0 16px 64px rgba(241, 0, 0, 0.18);
  transform: scale(1.01);
}

.route-item.active::before {
  opacity: 1;
}

/* Accordion Header - Premium Glass Effect */
.route-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.5rem 1.75rem;
  cursor: pointer;
  user-select: none;
  gap: 1.25rem;
  flex-wrap: wrap;
  background: transparent;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  z-index: 1;
}

.route-header:hover {
  background: rgba(255, 245, 245, 0.3);
}

.route-item.active .route-header {
  background: rgba(255, 240, 240, 0.4);
  padding-bottom: 1.75rem;
}

/* Close X button - only show when route is active */
.route-item.active .route-header::after {
  content: '✕';
  position: absolute;
  top: 1rem;
  right: 1rem;
  font-size: 1.5rem;
  color: var(--brand, #f10000);
  font-weight: 700;
  line-height: 1;
  opacity: 0.7;
  transition: opacity 0.2s ease;
}

.route-item.active .route-header:hover::after {
  opacity: 1;
}

.route-title-section {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
  min-width: 200px;
}

.route-icon {
  font-size: 1.5rem;
  transition: transform 0.3s ease;
  color: var(--brand);
}

.route-item.active .route-icon {
  transform: rotate(90deg);
}

.route-title {
  font-weight: 700;
  font-size: 1.15rem;
  color: var(--text);
  line-height: 1.3;
}

.route-stats-inline {
  display: flex;
  gap: 0.75rem;
  color: #555;
  font-size: 0.9rem;
  font-weight: 600;
  flex-wrap: wrap;
  align-items: center;
}

.route-stats-inline span {
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.5rem 1rem;
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: 20px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.route-stats-inline span:hover {
  background: rgba(255, 255, 255, 0.8);
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
}

.difficulty-badge {
  display: inline-block;
  padding: 0.5rem 1.1rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.difficulty-badge:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.16);
}

.difficulty-moderate {
  background: linear-gradient(135deg, #FFA726 0%, #FF9800 100%);
  color: white;
  border: 2px solid #FF9800;
}

.difficulty-hard {
  background: linear-gradient(135deg, #EF5350 0%, #E53935 100%);
  color: white;
  border: 2px solid #E53935;
}

.difficulty-very-hard {
  background: linear-gradient(135deg, #C62828 0%, #B71C1C 100%);
  color: white;
  border: 2px solid #B71C1C;
}

.difficulty-epic {
  background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
  color: #000;
  border: 2px solid #FFA500;
  font-weight: 900;
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
}

.route-actions {
  display: flex;
  gap: 0.5rem;
}

.gpx-download {
  padding: 0.6rem 1rem;
  background: linear-gradient(135deg, #f5f5f5 0%, #fff 100%);
  border: 2px solid #ddd;
  border-radius: 8px;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text);
  text-decoration: none;
  transition: all 0.3s ease;
  white-space: nowrap;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.gpx-download:hover {
  background: var(--brand);
  color: white;
  border-color: var(--brand);
  text-decoration: none;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(241,0,0,0.3);
}

/* Accordion Content */
.route-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s ease;
}

.route-item.active .route-content {
  max-height: 2000px;
}

.route-content-inner {
  padding: 0 1.25rem 1.25rem 1.25rem;
}

.route-description {
  margin: 0 0 1.5rem 0;
  padding: 1rem;
  background: #f9f9f9;
  border-left: 3px solid var(--brand);
  border-radius: 4px;
  font-style: italic;
  color: var(--muted);
}

/* Map and Elevation Containers */
.route-map {
  height: 500px;
  width: 100%;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  border: 1px solid #eee;
  overflow: hidden;
  background: #aad3df;
}

.route-map .leaflet-tile-container {
  opacity: 1 !important;
}

.route-map .leaflet-tile,
.route-map .leaflet-tile-pane img,
.route-map img.leaflet-tile {
  opacity: 1 !important;
  visibility: visible !important;
  width: 256px !important;
  height: 256px !important;
  max-width: 256px !important;
  max-height: 256px !important;
  min-width: 256px !important;
  min-height: 256px !important;
}

.route-map .leaflet-layer {
  opacity: 1 !important;
}

.route-map img {
  max-width: none !important;
  width: auto !important;
  height: auto !important;
}

.route-map .leaflet-overlay-pane {
  z-index: 400 !important;
  pointer-events: none !important;
}

.route-map .leaflet-overlay-pane svg,
.route-map svg.leaflet-zoom-animated {
  overflow: visible !important;
  max-width: none !important;
  max-height: none !important;
  min-width: 0 !important;
  min-height: 0 !important;
  display: block !important;
  position: absolute !important;
}

/* Critical: Override main.css rule that forces height:auto on all SVGs */
main .container .prose .route-map svg,
.route-map .leaflet-overlay-pane svg,
.route-map svg {
  max-width: none !important;
  max-height: none !important;
  height: initial !important;
  width: initial !important;
}

.route-map .leaflet-overlay-pane path,
.route-map path.leaflet-interactive,
.route-map svg path,
.route-map path.route-polyline {
  visibility: visible !important;
  display: block !important;
  opacity: 0.8 !important;
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  stroke-opacity: 0.8 !important;
  fill: none !important;
  fill-opacity: 0 !important;
  pointer-events: auto !important;
  vector-effect: non-scaling-stroke !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  transform: none !important;
}

path.route-polyline {
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  visibility: visible !important;
  opacity: 0.8 !important;
}

.route-map .leaflet-marker-icon,
.route-map .leaflet-marker-pane img {
  max-width: none !important;
  min-width: 25px !important;
  min-height: 41px !important;
  width: 25px !important;
  height: 41px !important;
}

.route-map .leaflet-marker-shadow {
  max-width: none !important;
  width: 41px !important;
  height: 41px !important;
}

.route-map .custom-marker {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.route-map .custom-marker div {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.elevation-profile {
  height: 300px;
  width: 100%;
  background: white;
  padding: 1rem;
  border-radius: 8px;
  border: 1px solid #eee;
}

.elevation-profile canvas {
  max-width: 100% !important;
}

/* Coming Soon Placeholder */
.coming-soon {
  padding: 2rem;
  text-align: center;
  background: #f9f9f9;
  border-radius: 8px;
  color: var(--muted);
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .route-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .route-stats-inline {
    font-size: 0.85rem;
  }

  .route-map {
    height: 400px;
  }

  .elevation-profile {
    height: 250px;
  }
}
</style>

<!-- ROUTES 2-COLUMN LAYOUT -->
<div class="routes-2col-wrapper">

<!-- LEFT COLUMN: NORTH ROUTES -->
<div class="routes-column">

<div class="route-section">
<h2 id="north-routes" class="route-direction-header">North Routes – Andratx → Pollença</h2>
</div>

<div class="route-accordion">
  <!-- Route 1: Vanilla -->
  <div class="route-item" id="route-north-1">
    <div class="route-header" onclick="toggleRoute('north-1')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Vanilla – Port d'Andratx → Port de Pollença</div>
          <div class="route-stats-inline">
            <span>📏 115 km</span>
            <span>⛰️ 2,425 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-vanilla.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Direct classic: SW coastal section → Sóller → Puig Major → aqueduct → Lluc → fast descent into Pollença. Most direct return route.</p>
        <div id="map-north-1" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-1"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 2: Via Caimari -->
  <div class="route-item" id="route-north-2">
    <div class="route-header" onclick="toggleRoute('north-2')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Via Caimari (Vanilla+)</div>
          <div class="route-stats-inline">
            <span>📏 137 km</span>
            <span>⛰️ 2,700 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-via-caimari.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">As above, but continue past the Repsol at Lluc, descend Coll de sa Bataia → lanes via Binibona/Campanet → Alcúdia bay road → Port de Pollença. Second most direct return route. Additional lanes before the finish.</p>
        <div id="map-north-2" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-2"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 3: Port Valldemossa -->
  <div class="route-item" id="route-north-3">
    <div class="route-header" onclick="toggleRoute('north-3')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Incl. Port Valldemossa</div>
          <div class="route-stats-inline">
            <span>📏 132 km</span>
            <span>⛰️ 3,000 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-portvalldemossa.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coastal section + drop/return Port Valldemossa → Sóller → Puig Major → Lluc → descend to Pollença. Great addition to the vanilla route.</p>
        <div id="map-north-3" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-3"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 4: Valldemossa & Sa Calobra -->
  <div class="route-item" id="route-north-4">
    <div class="route-header" onclick="toggleRoute('north-4')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Incl. Port Valldemossa & Sa Calobra</div>
          <div class="route-stats-inline">
            <span>📏 158 km</span>
            <span>⛰️ 3,949 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-valldemossa-sacalobra.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coastal section + Port Valldemossa, then Puig Major → left at aqueduct → Coll dels Reis → down Sa Calobra, climb back → Lluc → descend to Pollença. Hard.</p>
        <div id="map-north-4" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-4"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 5: Big Daddy -->
  <div class="route-item" id="route-north-5">
    <div class="route-header" onclick="toggleRoute('north-5')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Big Daddy Challenge (8 classified cols)</div>
          <div class="route-stats-inline">
            <span>📏 162 km</span>
            <span>⛰️ 4,267 m</span>
            <span class="difficulty-badge difficulty-very-hard">Very Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-big-daddy.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coastal section + Port des Canonge + Port Valldemossa → long side Puig Major → aqueduct → Coll dels Reis → Sa Calobra (down & up) → Lluc → Pollença/Port. Very hard.</p>
        <div id="map-north-5" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-5"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 6: Coll de Sóller & Orient Valley -->
  <div class="route-item" id="route-north-6">
    <div class="route-header" onclick="toggleRoute('north-6')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Return via the Coll de Sóller and the Orient Valley</div>
          <div class="route-stats-inline">
            <span>📏 137 km</span>
            <span>⛰️ 2,360 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-colldesoller-orient.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Complete the classic coastal section then take on the 51 switchbacks by going up and over the Coll de Sóller before cruising through the tranquil Orient Valley. One more for the climbers amongst us. Great day out. The recovery drinks will be well earned that evening!</p>
        <div id="map-north-6" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-6"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

<!-- RIGHT COLUMN: SOUTH ROUTES -->
<div class="routes-column">

<div class="route-section">
<h2 id="south-routes" class="route-direction-header">South Routes – Pollença → Andratx</h2>
</div>

<div class="route-accordion">
  <!-- Route 6: South Vanilla -->
  <div class="route-item" id="route-south-1">
    <div class="route-header" onclick="toggleRoute('south-1')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Vanilla – Port de Pollença → Port d'Andratx</div>
          <div class="route-stats-inline">
            <span>📏 121 km</span>
            <span>⛰️ 2,700 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-vanilla.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coll de Femenia → past Lluc/Sa Calobra turn → easy side Puig Major → 14 km descent to Sóller → coast via Deià, Valldemossa, Banyalbufar, Estellencs → Port d'Andratx. Most direct return route. Brilliant!</p>
        <div id="map-south-1" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-1"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 7: Canonge & Valldemossa -->
  <div class="route-item" id="route-south-2">
    <div class="route-header" onclick="toggleRoute('south-2')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Incl. Port des Canonge & Port Valldemossa</div>
          <div class="route-stats-inline">
            <span>📏 145 km</span>
            <span>⛰️ 3,390 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-canonge-valldemossa.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Femenia → Lluc → Puig Major → Sóller → coast + add-ons: drop/return Port des Canonge and Port Valldemossa → SW coastal finish to Andratx.</p>
        <div id="map-south-2" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-2"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 8: Via Puigpunyent -->
  <div class="route-item" id="route-south-3">
    <div class="route-header" onclick="toggleRoute('south-3')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Via Puigpunyent</div>
          <div class="route-stats-inline">
            <span>📏 125 km</span>
            <span>⛰️ 2,650 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-puigpunyent.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Femenia → Lluc → Puig Major → Sóller → Deià → Valldemossa → Esporles → Puigpunyent → Galilea → Es Capdellà → Port d'Andratx. Spend a little time away from the coast and off the grid!</p>
        <div id="map-south-3" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-3"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 9: Big Daddy Reverse -->
  <div class="route-item" id="route-south-4">
    <div class="route-header" onclick="toggleRoute('south-4')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Big Daddy Challenge (reverse)</div>
          <div class="route-stats-inline">
            <span>📏 167 km</span>
            <span>⛰️ 4,121 m</span>
            <span class="difficulty-badge difficulty-very-hard">Very Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-big-daddy.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">As above conceptually, including the three "ports" (Canonge, Valldemossa, Sa Calobra). For strong climbers only.</p>
        <div id="map-south-4" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-4"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 10: Cap de Formentor -->
  <div class="route-item" id="route-south-5">
    <div class="route-header" onclick="toggleRoute('south-5')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Return via Cap de Formentor</div>
          <div class="route-stats-inline">
            <span>📏 162 km</span>
            <span>⛰️ 3,500 m</span>
            <span class="difficulty-badge difficulty-epic">Epic</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-formentor.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Complete the classic coast to coast but include what is regarded by some as the best 20km of road for cyclists in Europe - the out and back to the lighthouse of Cap de Formentor. Epic day out!</p>
        <div id="map-south-5" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-5"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

</div>

<script>
// Toggle info card expansion
function toggleCard(card) {
  const wasExpanded = card.classList.contains('expanded');
  const grid = card.closest('.info-cards-grid');

  // Close all other cards
  document.querySelectorAll('.info-card.expanded').forEach(c => {
    c.classList.remove('expanded');
  });

  // Toggle this card
  if (!wasExpanded) {
    card.classList.add('expanded');
    grid.classList.add('has-expanded');
  } else {
    grid.classList.remove('has-expanded');
  }
}

// Smooth scroll to product panel (CTA card click)
function smoothScrollToProduct(event) {
  // Prevent any default behavior
  if (event) {
    event.stopPropagation();
  }

  const target = document.getElementById('finishers-gear');
  if (target) {
    target.scrollIntoView({
      behavior: 'smooth',
      block: 'start'
    });
  }
}

// Route configuration
// Using -web.gpx files for display (75% smaller), original files for downloads
const routes = {
  'north-1': { gpx: 'portandratx-pollenca-vanilla-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-2': { gpx: 'portandratx-pollenca-via-caimari-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-3': { gpx: 'portandratx-pollenca-portvalldemossa-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-4': { gpx: 'portandratx-pollenca-valldemossa-sacalobra-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-5': { gpx: 'portandratx-pollenca-big-daddy-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-6': { gpx: 'portandratx-pollenca-colldesoller-orient-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'south-1': { gpx: 'portpollenca-portandratx-vanilla-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-2': { gpx: 'portpollenca-portandratx-canonge-valldemossa-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-3': { gpx: 'portpollenca-portandratx-puigpunyent-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-4': { gpx: 'portpollenca-portandratx-big-daddy-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-5': { gpx: 'portpollenca-portandratx-formentor-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' }
};

const loadedRoutes = {};

// Toggle accordion item
function toggleRoute(routeId) {
  const item = document.getElementById('route-' + routeId);
  const wasActive = item.classList.contains('active');
  const wrapper = document.querySelector('.routes-2col-wrapper');

  // Close all other items
  document.querySelectorAll('.route-item').forEach(el => {
    el.classList.remove('active');
  });

  // Open this item if it wasn't active
  if (!wasActive) {
    item.classList.add('active');
    wrapper.classList.add('has-expanded');

    // Load route if not already loaded
    if (!loadedRoutes[routeId]) {
      loadRoute(routeId);
      loadedRoutes[routeId] = true;
    }
  } else {
    wrapper.classList.remove('has-expanded');
  }
}

// Load and render a route
async function loadRoute(routeId) {
  const config = routes[routeId];
  if (!config) return;

  try {
    // Fetch GPX
    const response = await fetch('/routes/' + config.gpx);
    const gpxText = await response.text();
    const parser = new DOMParser();
    const gpxDoc = parser.parseFromString(gpxText, 'text/xml');

    // Extract coordinates
    const trkpts = Array.from(gpxDoc.querySelectorAll('trkpt'));
    const coordinates = trkpts.map(pt => ({
      lat: parseFloat(pt.getAttribute('lat')),
      lon: parseFloat(pt.getAttribute('lon')),
      ele: parseFloat(pt.querySelector('ele').textContent)
    }));

    // Render map
    renderMap(routeId, coordinates, config);

    // Render elevation chart
    renderElevationChart(routeId, coordinates);

  } catch (error) {
    console.error('Error loading route:', error);
  }
}

// Render map
function renderMap(routeId, coordinates, config) {
  const mapId = 'map-' + routeId;
  const mapDiv = document.getElementById(mapId);

  console.log('Rendering map for', routeId);
  console.log('Map div dimensions:', mapDiv.offsetWidth, 'x', mapDiv.offsetHeight);

  // Initialize map
  const map = L.map(mapId).setView([coordinates[0].lat, coordinates[0].lon], 10);
  console.log('Map initialized');

  // Add tiles
  const tileLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors',
    maxZoom: 19
  });

  tileLayer.on('tileload', function() {
    console.log('Tile loaded for', routeId);
  });

  tileLayer.on('tileerror', function(error) {
    console.error('Tile error for', routeId, error);
  });

  tileLayer.addTo(map);
  console.log('Tiles added');

  // Add route line with explicit stroke properties
  const routeLine = L.polyline(coordinates.map(c => [c.lat, c.lon]), {
    color: '#f10000',
    weight: 3,
    opacity: 0.8,
    fillOpacity: 0,
    lineCap: 'round',
    lineJoin: 'round',
    className: 'route-polyline',
    smoothFactor: 0,  // Disable path simplification
    noClip: true      // Don't clip the path
  }).addTo(map);

  // Explicitly bring polyline to front
  routeLine.bringToFront();

  console.log('Route line added with', coordinates.length, 'points');
  console.log('Route line bounds:', routeLine.getBounds());

  // Check the actual DOM element
  setTimeout(() => {
    const pathElement = routeLine.getElement();
    if (pathElement) {
      console.log('Route line DOM element found');
      console.log('Path element tag:', pathElement.tagName);
      console.log('Path element class:', pathElement.className);
      console.log('Path computed stroke:', window.getComputedStyle(pathElement).stroke);
      console.log('Path computed stroke-width:', window.getComputedStyle(pathElement).strokeWidth);
      console.log('Path computed display:', window.getComputedStyle(pathElement).display);
      console.log('Path computed visibility:', window.getComputedStyle(pathElement).visibility);
    } else {
      console.error('Route line DOM element NOT found!');
    }
  }, 500);

  // Create custom marker icons with inline SVG
  const startIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#00ff00;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  const endIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#ff0000;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  // Add markers with custom icons
  L.marker([coordinates[0].lat, coordinates[0].lon], { icon: startIcon })
    .addTo(map)
    .bindPopup('<strong>Start:</strong> ' + config.startName);
  console.log('Start marker added');

  const lastIdx = coordinates.length - 1;
  L.marker([coordinates[lastIdx].lat, coordinates[lastIdx].lon], { icon: endIcon })
    .addTo(map)
    .bindPopup('<strong>End:</strong> ' + config.endName);
  console.log('End marker added');

  // Fit bounds
  map.fitBounds(routeLine.getBounds(), { padding: [50, 50] });
  console.log('Bounds fitted');

  // Force resize after animation
  setTimeout(() => {
    map.invalidateSize();
    console.log('Map invalidated for', routeId, 'new dimensions:', mapDiv.offsetWidth, 'x', mapDiv.offsetHeight);

    // Debug: Check tile visibility
    const tiles = mapDiv.querySelectorAll('.leaflet-tile');
    console.log('Number of tiles in DOM:', tiles.length);
    if (tiles.length > 0) {
      console.log('First tile dimensions:', tiles[0].offsetWidth, 'x', tiles[0].offsetHeight);
      console.log('First tile computed style:', window.getComputedStyle(tiles[0]).width, window.getComputedStyle(tiles[0]).height);
    }

    // Debug: Check route visibility
    const overlayPane = mapDiv.querySelector('.leaflet-overlay-pane');
    console.log('Overlay pane:', overlayPane ? 'found' : 'NOT FOUND');

    if (overlayPane) {
      const svgs = overlayPane.querySelectorAll('svg');
      console.log('SVGs in overlay:', svgs.length);
      if (svgs.length > 0) {
        const svg = svgs[0];
        console.log('SVG dimensions:', svg.getAttribute('width'), 'x', svg.getAttribute('height'));
        console.log('SVG style:', svg.style.cssText);
        console.log('SVG position:', window.getComputedStyle(svg).position);
      }
    }

    const paths = mapDiv.querySelectorAll('path');
    console.log('Number of path elements:', paths.length);
    if (paths.length > 0) {
      const pathStyle = window.getComputedStyle(paths[0]);
      console.log('Path stroke:', pathStyle.stroke, 'stroke-width:', pathStyle.strokeWidth, 'visibility:', pathStyle.visibility);
      console.log('Path d attribute length:', paths[0].getAttribute('d') ? paths[0].getAttribute('d').length : 0);

      // Check path bounding box
      try {
        const bbox = paths[0].getBBox();
        console.log('Path bbox:', bbox.x, bbox.y, bbox.width, bbox.height);

        // Check if bbox is outside visible area
        const svg = paths[0].closest('svg');
        const svgRect = svg.getBoundingClientRect();
        const pathRect = paths[0].getBoundingClientRect();
        console.log('SVG screen position:', svgRect.x, svgRect.y, svgRect.width, svgRect.height);
        console.log('Path screen position:', pathRect.x, pathRect.y, pathRect.width, pathRect.height);
        console.log('SVG viewBox:', svg.getAttribute('viewBox'));
        console.log('SVG transform:', svg.style.transform);

        // Sample first few path coordinates
        const dAttr = paths[0].getAttribute('d');
        const firstCoords = dAttr.substring(0, 200);
        console.log('First 200 chars of path d:', firstCoords);
      } catch(e) {
        console.log('Could not get bbox:', e.message);
      }
    }

    // Debug: Check markers
    const markers = mapDiv.querySelectorAll('.leaflet-marker-icon');
    console.log('Number of markers:', markers.length);
    if (markers.length > 0) {
      console.log('First marker dimensions:', markers[0].offsetWidth, 'x', markers[0].offsetHeight);
    }
  }, 1000);
}

// Render elevation chart
function renderElevationChart(routeId, coordinates) {
  const chartId = 'chart-' + routeId;
  const ctx = document.getElementById(chartId).getContext('2d');

  // Calculate cumulative distance
  const distancePoints = [0];
  for (let i = 1; i < coordinates.length; i++) {
    const lat1 = coordinates[i-1].lat * Math.PI / 180;
    const lat2 = coordinates[i].lat * Math.PI / 180;
    const dLat = (coordinates[i].lat - coordinates[i-1].lat) * Math.PI / 180;
    const dLon = (coordinates[i].lon - coordinates[i-1].lon) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(lat1) * Math.cos(lat2) *
              Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    distancePoints.push(distancePoints[i-1] + 6371 * c);
  }

  // Sample data
  const sampleRate = 10;
  const sampledDistances = distancePoints.filter((_, i) => i % sampleRate === 0);
  const sampledElevations = coordinates.filter((_, i) => i % sampleRate === 0).map(c => c.ele);

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: sampledDistances.map(d => d.toFixed(1)),
      datasets: [{
        label: 'Elevation (m)',
        data: sampledElevations,
        borderColor: '#f10000',
        backgroundColor: 'rgba(241, 0, 0, 0.1)',
        borderWidth: 2,
        fill: true,
        tension: 0.4,
        pointRadius: 0
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            title: (context) => 'Distance: ' + context[0].label + ' km',
            label: (context) => 'Elevation: ' + context.parsed.y.toFixed(0) + ' m'
          }
        }
      },
      scales: {
        x: {
          title: { display: true, text: 'Distance (km)' },
          ticks: { maxTicksLimit: 15 }
        },
        y: {
          title: { display: true, text: 'Elevation (m)' }
        }
      },
      interaction: {
        intersect: false,
        mode: 'index'
      }
    }
  });
}

</script>

<!-- OPTION 1: Horizontal Layout -->
<div id="finishers-gear" class="finishers-tshirt-horizontal" style="margin: 4rem auto 2rem; max-width: 1000px; scroll-margin-top: 2rem;">
<a href="https://mallorcacycleshuttle.company.site/products/Andratx-Pollenca-Finishers-Unisex-Classic-T-p788401800" target="_blank" rel="noopener noreferrer" style="text-decoration: none; display: block;">
<div style="background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%); border-radius: 1rem; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; display: flex; flex-wrap: wrap; align-items: center;">
<div style="flex: 1 1 350px; min-width: 300px;">
<img src="/img/finishers-tshirt-andratx-pollenca.webp" alt="Andratx-Pollença Finisher's T-Shirt" style="width: 100%; height: 100%; object-fit: cover; display: block;">
</div>
<div style="flex: 1 1 400px; padding: 2.5rem;">
<h2 style="color: var(--brand, #f10000); margin-bottom: 0.75rem; font-size: 1.75rem; font-weight: 700;">Commemorate Your Ride</h2>
<h3 style="color: #333; font-size: 1.2rem; font-weight: 600; margin-bottom: 0.75rem;">Andratx-Pollença Finisher's T-Shirt</h3>
<p style="color: #666; font-size: 1rem; margin-bottom: 1.5rem; line-height: 1.6;">Celebrate completing this epic route with our exclusive finisher's t-shirt. Available in multiple colors and sizes.</p>
<div style="display: inline-block; padding: 0.9rem 2rem; background: linear-gradient(135deg, var(--brand, #f10000) 0%, #ff3333 100%); color: white; border-radius: 0.5rem; font-size: 1rem; font-weight: 700; box-shadow: 0 4px 15px rgba(241, 0, 0, 0.3);">
Shop Now →
</div>
</div>
</div>
</a>
</div>

<!-- OPTION 4: Glassmorphism Style (matching route cards) -->
<div class="finishers-tshirt-glassmorphism" style="margin: 4rem auto 2rem; max-width: 1000px; scroll-margin-top: 2rem;">
<a href="https://mallorcacycleshuttle.company.site/products/Andratx-Pollenca-Finishers-Unisex-Classic-T-p788401800" target="_blank" rel="noopener noreferrer" style="text-decoration: none; display: block;">
<div style="background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.9); border-radius: 1.5rem; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); padding: 2rem; transition: all 0.3s ease; display: flex; flex-wrap: wrap; align-items: center; gap: 2rem;">
<div style="flex: 1 1 320px; min-width: 280px;">
<div style="border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);">
<img src="/img/finishers-tshirt-andratx-pollenca.webp" alt="Andratx-Pollença Finisher's T-Shirt" style="width: 100%; height: auto; display: block;">
</div>
</div>
<div style="flex: 1 1 400px;">
<div style="display: inline-block; padding: 0.4rem 1rem; background: rgba(241, 0, 0, 0.1); border: 1px solid rgba(241, 0, 0, 0.3); border-radius: 2rem; font-size: 0.75rem; font-weight: 700; color: var(--brand, #f10000); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 1rem;">
Exclusive Merch
</div>
<h2 style="color: #1a1a1a; margin-bottom: 0.5rem; font-size: 1.75rem; font-weight: 800;">Commemorate Your Ride</h2>
<h3 style="color: #333; font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem;">Andratx-Pollença Finisher's T-Shirt</h3>
<p style="color: #555; font-size: 0.95rem; margin-bottom: 1.75rem; line-height: 1.7;">Celebrate completing this legendary coast-to-coast route with our premium finisher's tee. Available in multiple colors and sizes to suit every rider.</p>
<div style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.9rem 2rem; background: linear-gradient(135deg, var(--brand, #f10000) 0%, #ff3333 100%); color: white; border-radius: 0.75rem; font-size: 1rem; font-weight: 700; box-shadow: 0 6px 24px rgba(241, 0, 0, 0.35);">
<span>Shop Now</span>
<span style="font-size: 1.2rem;">→</span>
</div>
</div>
</div>
</a>
</div>

<style>
/* Hover effects for Option 1 */
.finishers-tshirt-horizontal a > div:hover {
transform: translateY(-4px);
box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
}

/* Hover effects for Option 4 */
.finishers-tshirt-glassmorphism a > div:hover {
transform: translateY(-4px);
box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
background: rgba(255, 255, 255, 0.85);
}

/* Mobile responsive */
@media (max-width: 768px) {
.finishers-tshirt-horizontal > a > div,
.finishers-tshirt-glassmorphism > a > div {
flex-direction: column;
}

.finishers-tshirt-horizontal > a > div > div:first-child {
max-height: 350px;
}
}
</style>

<style>
/* Route Direction Headers - Premium Glassmorphism */
.route-direction-header {
  font-size: 2rem;
  font-weight: 800;
  padding: 2rem 2.5rem;
  margin: 4rem 0 2.5rem;
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.5);
  border-radius: 24px;
  box-shadow: 0 12px 48px rgba(0, 0, 0, 0.08);
  color: #111;
  position: relative;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  text-align: center;
  letter-spacing: -0.02em;
  scroll-margin-top: 2rem;
}

.route-direction-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(241, 0, 0, 0.08) 0%, rgba(255, 51, 51, 0.03) 100%);
  z-index: 0;
  border-radius: 24px;
}

.route-direction-header::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 5px;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(241, 0, 0, 0.6) 20%,
    rgba(241, 0, 0, 1) 50%,
    rgba(241, 0, 0, 0.6) 80%,
    transparent 100%
  );
  border-radius: 0 0 24px 24px;
  transition: height 0.4s ease;
}

.route-direction-header:hover {
  transform: translateY(-2px);
  box-shadow: 0 16px 64px rgba(241, 0, 0, 0.12);
  border-color: rgba(241, 0, 0, 0.2);
}

.route-direction-header:hover::after {
  height: 6px;
}

/* Add directional arrows via text content */
.route-direction-header {
  position: relative;
  z-index: 1;
}

</style>

