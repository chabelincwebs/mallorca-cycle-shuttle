---
title: "Master Cycling Guide: Andratx to Pollença"
description: "Complete guide for cycling from Andratx to Pollença through the Tramuntana mountains"
translationKey: "guide-andratx-pollenca"
---

<p class="header-subtitle">
We are not saying it's easy. We are not saying it's for everyone.
</p>

<div class="hero-intro-banner">
<div class="hero-intro-content">
<p class="hero-intro-centered fade-in-up">
We are saying that it's <strong>brilliant</strong>.
</p>
<p class="hero-intro-main fade-in-up delay-1">
For your <a href="#north-routes" class="highlight-red hero-link">"Best Ever Day On A Bike"</a> ride <strong>Port d'Andratx</strong> to <strong>Port de Pollença</strong> through Mallorca's stunning <span class="highlight">Serra de Tramuntana</span> mountains for the ultimate <a href="#south-routes" class="highlight-red hero-link">Coast-to-Coast</a>
</p>
<p class="hero-intro-features fade-in-up delay-2">
Scenic challenging climbs • Sweeping descents • Butter smooth tarmac • Regular café stops • Cycling paradise
</p>
</div>
</div>

<style>
/* ============================================
   APPLE 2025 DESIGN SYSTEM
   ============================================ */

/* System Font Stack */
:root {
  --font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --brand-color: #f10000;
  --text-primary: #1d1d1f;
  --text-secondary: #6e6e73;
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f7;
  --border-light: #d2d2d7;
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
  --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
}

/* Typography Reset */
h1, h2, h3, p {
  font-family: var(--font-system);
  font-weight: normal;
  margin: 0;
}

/* Page Title */
h1 {
  text-align: center;
  margin-bottom: 0.75rem;
  font-size: 3rem;
  font-weight: 700;
  color: var(--text-primary);
  letter-spacing: -0.02em;
}

/* Header Subtitle */
.header-subtitle {
  font-size: 1.25rem;
  line-height: 1.5;
  color: var(--text-secondary);
  font-weight: 500;
  font-style: italic;
  text-align: center;
  margin: 0 auto 3rem auto;
  max-width: 800px;
}

/* Hero Intro Banner - Clean Card */
.hero-intro-banner {
  margin: 0 auto 4rem auto;
  padding: 3rem 2.5rem;
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  max-width: 1000px;
}

.hero-intro-content {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Centered "brilliant" Line */
.hero-intro-centered {
  font-size: 2.5rem;
  line-height: 1.2;
  font-weight: 700;
  text-align: center;
  color: var(--text-primary);
  letter-spacing: -0.03em;
}

.hero-intro-centered strong {
  color: var(--brand-color);
}

/* Main Intro Paragraph */
.hero-intro-main {
  font-size: 1.25rem;
  line-height: 1.6;
  color: var(--text-primary);
  font-weight: 400;
  text-align: center;
  letter-spacing: -0.01em;
}

.hero-intro-main strong {
  font-weight: 600;
}

.hero-intro-main .highlight {
  font-weight: 600;
}

.hero-intro-main .highlight-red {
  background: linear-gradient(90deg, #f10000 0%, #ff4444 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
  font-size: 1.15em;
  letter-spacing: -0.02em;
}

/* Hero Links */
.hero-link {
  text-decoration: none;
  display: inline-block;
  transition: var(--transition-fast);
}

.hero-link:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(241, 0, 0, 0.3);
}

/* Smooth scroll */
html {
  scroll-behavior: smooth;
}

/* Features Line */
.hero-intro-features {
  font-size: 1rem;
  line-height: 1.5;
  color: var(--text-secondary);
  text-align: center;
  font-weight: 400;
}

/* Fade-in animations - faster */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  opacity: 0;
}

.fade-in-up.delay-1 {
  animation-delay: 0.15s;
}

.fade-in-up.delay-2 {
  animation-delay: 0.3s;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  h1 {
    font-size: 2rem;
  }

  .header-subtitle {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    padding: 0 1rem;
  }

  .hero-intro-banner {
    padding: 2rem 1.5rem;
    margin-bottom: 3rem;
  }

  .hero-intro-centered {
    font-size: 1.75rem;
  }

  .hero-intro-main {
    font-size: 1.1rem;
  }
}
</style>

<!-- INFO CARDS GRID -->
<div class="info-cards-wrapper">
<div class="info-cards-grid">

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">📸</span>
<span class="card-toggle">+</span>
</div>
<h3>Snapshot</h3>
</div>
<div class="info-card-content">
<p><strong>Why this route:</strong> Coast-to-coast through the Tramuntana mountain range along the coast on smooth tarmac – Mallorca's best day on a bike. Probably your best day on a bike. Ever.</p>
<p><strong>How it works:</strong> Bus out, bike back. Take the scheduled bike bus to Port d'Andratx (or the reverse to Port de Pollença), ride one of the suggested or your own custom route back.</p>
<p><strong>Scheduled services:</strong> We take care of the logistics, you take care of relaxing into the best Mallorca has to offer. Book the <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">scheduled bike bus</a> from any of the departure locations on the booking platform.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">🔑</span>
<span class="card-toggle">+</span>
</div>
<h3>Key Sections</h3>
</div>
<div class="info-card-content">
<p><strong>Estellencs to Deià:</strong> Coastal beauty.</p>
<p><strong>Banyalbufar:</strong> Enough said.</p>
<p><strong>Puig Major (from Sóller):</strong> 14 km @ 6.2%, ~828 m. Long, steady; lit tunnel(s) then aqueduct.</p>
<p><strong>Coll dels Reis / Sa Calobra:</strong> Optional add-on – descend to port, climb back; bucket-list hairpins.</p>
<p><strong>Port Valldemossa & Port des Canonge:</strong> Short, steep, scenic dead-end descents and returns; "mini Sa Calobra" feel without the traffic.</p>
<p><strong>Coll de Sa Bataia (from Lluc side):</strong> Leads to Caimari descent and lanes to the bay road.</p>
<p><strong>Coll de Sóller (alt. line):</strong> Winding classic if avoiding the MA-10 high route.</p>
<p><strong>Coll de Femenia (north side):</strong> Gateway climb leaving Pollença toward Lluc.</p>
<p><strong>Coll de Femenia (north side):</strong> Gateway F1 style descent from Lluc to Pollença.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">☕</span>
<span class="card-toggle">+</span>
</div>
<h3>Café/Refuel Stops</h3>
</div>
<div class="info-card-content">
<p><em>km estimates from Andratx</em></p>
<p><strong>Es Grau (≈13 km):</strong> Balcony views over the cliffs; quick coffee.</p>
<p><strong>Estellencs (≈17 km):</strong> "Cafetería Estellencs" – Simple, handy, right on MA-10.</p>
<p><strong>Banyalbufar (≈24 km):</strong> Son Tomás (range + views) or Bellavista (great views; watch the bikes).</p>
<p><strong>Valldemossa (≈39 km):</strong> Multiple options; Ca'n Molinas for Cocas de Patata with hot chocolate.</p>
<p><strong>Deià (≈48 km):</strong> Bakery in the supermarket run by Marc & Vincent Reynés; their café in Port de Sóller too.</p>
<p><strong>Sóller (≈58 km) – Sa Frontera:</strong> Solid menu before Puig Major.</p>
<p><strong>Port de Sóller (detour):</strong> Waterfront options; Reynés Cycling Café for cake/coffee.</p>
<p><strong>Aqueduct / Sa Calobra turn (≈80 km):</strong> OJ Shack – fresh orange juice + on-bike snacks.</p>
<p><strong>Lluc / Coll de sa Bataia top (≈89 km):</strong> Repsol + café or Lluc Monastery – quick or sit-down.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">💡</span>
<span class="card-toggle">+</span>
</div>
<h3>Good to Know</h3>
</div>
<div class="info-card-content">
<ul>
<li>Book for early in your trip whilst legs are still fresh & even with 308 days of sun each year, if weather causes a cancellation, you still have an alternate day.</li>
<li>Seats are limited. Book early.</li>
<li>This will be without a doubt your best day in Mallorca.</li>
<li>Arrive 10 minutes early for bike packing on the day.</li>
<li>It's an early start, plenty of places for breakfast, coffee, toilet on arrival.</li>
<li><strong>Rescue cover:</strong> <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">Peace of mind</a>. Strongly advised. Bikes and bodies do sometimes break down.</li>
<li>Safe loading of bikes in the trailers: Packed between mattresses – secure and safe.</li>
<li>Average return time is just over 6 hours plus stops on the vanilla (shortest) route.</li>
<li>Cafe stops appear regularly, choices are never more than an hour apart.</li>
<li>Regular fuelling is essential.</li>
</ul>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">📅</span>
<span class="card-toggle">+</span>
</div>
<h3>Schedule</h3>
</div>
<div class="info-card-content">
<p>Use the bike bus to Port d'Andratx from Port de Pollença/Alcúdia/Playa de Muro and from Peguera, Playa de Palma & Santa Ponsa to Port de Pollença.</p>
<p><a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer" class="cta">View Schedule & Book →</a></p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">⭐</span>
<span class="card-toggle">+</span>
</div>
<h3>Social Proof</h3>
</div>
<div class="info-card-content">
<p><strong>"18 Swedish ladies" testimonial (2016):</strong> 162 km Big Daddy day called "best ever day on a bike" – loved Canonge, Valldemossa, Sa Calobra; tunnels lit; fast finish to Pollença. Returning the next season.</p>
<p><strong>John McCracken (spring 2025):</strong> One-way format lets you enjoy the scenery without turning it into an ultra-distance day; highlights: Gramola start, MA-10 cliff sections, Monnàber tunnel approach to Puig Major, Femenia descent "let go."</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">📊</span>
<span class="card-toggle">+</span>
</div>
<h3>Key Stats</h3>
</div>
<div class="info-card-content">
<p><strong>Signature climb:</strong> Puig Major from Sóller (southbound) – 14 km @ 6.2% (≈828 m).</p>
<p><strong>Signature descent:</strong> Puig Major to Sóller (northbound) – 14 km @ 6.2% (≈828 m).</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">📷</span>
<span class="card-toggle">+</span>
</div>
<h3>Memory Maker!</h3>
</div>
<div class="info-card-content">
<p><strong>Port de Valldemossa:</strong> Mini & maybe better? version of Sa Calobra (down & back).</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">🍰</span>
<span class="card-toggle">+</span>
</div>
<h3>Quick Fuel Tips</h3>
</div>
<div class="info-card-content">
<p><strong>Quick fuel to get you home:</strong> OJ shack at the aqueduct or Sa Bataia café/garage (going North), Estellencs (going South).</p>
<p><strong>Scenic fuel:</strong> Banyalbufar & Deià.</p>
<p><strong>Soller is approximately halfway.</strong></p>
<p><strong>Cafes are never more than an hour apart.</strong></p>
</div>
</div>

<div class="info-card" onclick="window.open('https://mallorcacycleshuttle.company.site/products/Andratx-Pollenca-Finishers-Unisex-Classic-T-p788401800', '_blank')" style="cursor: pointer;">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">👕</span>
<span class="card-toggle">+</span>
</div>
<h3>Finisher's Gear</h3>
</div>
<div class="info-card-content">
<p><strong>Celebrate your achievement!</strong></p>
<p>Get your exclusive Port d'Andratx-Port de Pollença finisher's t-shirt and show the world you conquered this epic route.</p>
<p style="color: var(--brand, #f10000); font-weight: 600; margin-top: 1rem;">Shop Now →</p>
</div>
</div>

<div class="info-card" onclick="window.open('https://mallorcacycleshuttle.company.site/products/Departure-towns-c28971057', '_blank')" style="cursor: pointer;">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">🚌</span>
<span class="card-toggle">+</span>
</div>
<h3>Book Your Shuttle</h3>
</div>
<div class="info-card-content">
<p><strong>Need a ride to start your adventure?</strong></p>
<p>Browse all departure towns and book your shuttle to Port d'Andratx or Port de Pollença. We've got you covered!</p>
<p style="color: var(--brand, #f10000); font-weight: 600; margin-top: 1rem;">View Shuttles →</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">📋</span>
<span class="card-toggle">+</span>
</div>
<h3>Coming Soon</h3>
</div>
<div class="info-card-content">
<p><strong>More information coming soon...</strong></p>
<p>Check back later for additional resources and tips for your Port d'Andratx-Port de Pollença adventure.</p>
</div>
</div>

</div>
</div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
/* ============================================
   INFO CARDS - CLEAN APPLE STYLE
   ============================================ */

.info-cards-wrapper {
  margin: 3rem auto 4rem auto;
  max-width: 1200px;
}

.info-cards-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

@media (min-width: 768px) {
  .info-cards-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1.25rem;
  }
}

@media (min-width: 1024px) {
  .info-cards-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
}

/* Hide cards when one is expanded */
.info-cards-grid.has-expanded .info-card {
  display: none;
}

.info-cards-grid.has-expanded .info-card.expanded {
  display: block;
}

.info-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: var(--transition-fast);
  cursor: pointer;
  box-shadow: var(--shadow-sm);
  position: relative;
}

.info-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--brand-color) 0%, #ff4444 100%);
  opacity: 0.3;
  transition: var(--transition-fast);
}

.info-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: rgba(241, 0, 0, 0.2);
}

.info-card:hover::before {
  opacity: 1;
  height: 5px;
}

.info-card.expanded {
  background: var(--bg-primary);
  box-shadow: var(--shadow-lg);
  border-color: rgba(241, 0, 0, 0.3);
  grid-column: 1 / -1;
}

.info-card.expanded::before {
  opacity: 1;
  height: 5px;
}

.info-card-header {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 1.75rem 1.5rem 1rem 1.5rem;
  user-select: none;
}

.info-card-header-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
}

.info-icon {
  font-size: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  filter: grayscale(100%);
  opacity: 0.6;
  transition: var(--transition-fast);
}

.info-card:hover .info-icon {
  filter: grayscale(0%);
  opacity: 1;
  transform: scale(1.1);
}

.info-card-header h3 {
  margin: 0;
  font-size: 1.125rem;
  color: var(--text-primary);
  font-weight: 600;
  line-height: 1.3;
}

.card-toggle {
  font-size: 1.5rem;
  font-weight: 300;
  color: var(--text-secondary);
  transition: var(--transition-fast);
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-secondary);
  border-radius: 50%;
}

.info-card:hover .card-toggle {
  background: rgba(241, 0, 0, 0.1);
  color: var(--brand-color);
}

.info-card.expanded .card-toggle {
  transform: rotate(45deg);
  background: rgba(241, 0, 0, 0.15);
  color: var(--brand-color);
}

.info-card-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s ease;
  padding: 0 1.5rem;
}

.info-card.expanded .info-card-content {
  max-height: 2000px;
  padding: 0 1.5rem 1.5rem 1.5rem;
}

.info-card-content p {
  margin: 0 0 1rem 0;
  line-height: 1.6;
  color: var(--text-primary);
  font-size: 0.9375rem;
}

.info-card-content p:last-child {
  margin-bottom: 0;
}

.info-card-content strong {
  font-weight: 600;
}

.info-card-content a {
  color: var(--brand-color);
  text-decoration: none;
  font-weight: 500;
  transition: var(--transition-fast);
  border-bottom: 1px solid rgba(241, 0, 0, 0.2);
}

.info-card-content a:hover {
  border-bottom-color: var(--brand-color);
}

.info-card-content .cta {
  display: inline-block;
  background: var(--brand-color);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: var(--radius-sm);
  text-decoration: none;
  font-weight: 600;
  margin-top: 1rem;
  transition: var(--transition-fast);
  box-shadow: 0 2px 8px rgba(241, 0, 0, 0.2);
  border: none;
}

.info-card-content .cta:hover {
  background: #d10000;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(241, 0, 0, 0.3);
}

.info-card-content ul {
  margin: 0;
  padding-left: 1.25rem;
}

.info-card-content li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
  color: var(--text-primary);
  font-size: 0.9375rem;
}

.info-card-content li:last-child {
  margin-bottom: 0;
}

/* ============================================
   ROUTES 2-COLUMN LAYOUT
   ============================================ */

.routes-2col-wrapper {
  display: grid;
  grid-template-columns: 1fr;
  gap: 3rem;
  margin: 4rem auto 3rem auto;
  max-width: 1400px;
}

@media (min-width: 768px) {
  .routes-2col-wrapper {
    grid-template-columns: repeat(2, 1fr);
    gap: 3rem;
  }
}

.routes-column {
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* Hide routes when one is expanded */
.routes-2col-wrapper.has-expanded .route-item {
  display: none;
}

.routes-2col-wrapper.has-expanded .route-item.active {
  display: block;
}

.routes-2col-wrapper.has-expanded .routes-column:has(.route-item.active) {
  grid-column: 1 / -1;
}

.routes-2col-wrapper.has-expanded .routes-column:not(:has(.route-item.active)) {
  display: none;
}

/* Route Section Headers */
.route-section {
  margin: 0 0 2rem 0;
}

.route-section h2 {
  font-size: 2rem;
  font-weight: 700;
  color: var(--text-primary);
  letter-spacing: -0.02em;
  text-align: center;
  padding: 2rem;
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  scroll-margin-top: 2rem;
}

/* Route Accordion */
.route-accordion {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin: 0 0 2rem 0;
}

.route-item {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  overflow: hidden;
  transition: var(--transition-fast);
  box-shadow: var(--shadow-sm);
}

.route-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: rgba(241, 0, 0, 0.2);
}

.route-item.active {
  background: var(--bg-primary);
  border-color: rgba(241, 0, 0, 0.3);
  box-shadow: var(--shadow-lg);
}

/* Route Header */
.route-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  cursor: pointer;
  user-select: none;
  gap: 1rem;
  flex-wrap: wrap;
  background: transparent;
  transition: var(--transition-fast);
}

.route-header:hover {
  background: rgba(245, 245, 247, 0.5);
}

.route-item.active .route-header {
  padding-bottom: 1.5rem;
}

/* Close X button */
.route-item.active .route-header::after {
  content: '✕';
  position: absolute;
  top: 1rem;
  right: 1rem;
  font-size: 1.25rem;
  color: var(--text-secondary);
  font-weight: 600;
  line-height: 1;
  opacity: 0.6;
  transition: opacity 0.2s ease;
}

.route-item.active .route-header:hover::after {
  opacity: 1;
}

.route-title-section {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
  min-width: 200px;
}

.route-icon {
  font-size: 1.25rem;
  transition: transform 0.2s ease;
  color: var(--brand-color);
}

.route-item.active .route-icon {
  transform: rotate(90deg);
}

.route-title {
  font-weight: 600;
  font-size: 1.0625rem;
  color: var(--text-primary);
  line-height: 1.3;
}

.route-stats-inline {
  display: flex;
  gap: 0.75rem;
  color: var(--text-secondary);
  font-size: 0.875rem;
  font-weight: 500;
  flex-wrap: wrap;
  align-items: center;
}

.route-stats-inline span {
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.375rem 0.75rem;
  background: var(--bg-secondary);
  border-radius: 6px;
  transition: var(--transition-fast);
}

.route-stats-inline span:hover {
  background: rgba(245, 245, 247, 0.8);
}

.difficulty-badge {
  display: inline-block;
  padding: 0.375rem 0.875rem;
  border-radius: 6px;
  font-size: 0.6875rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: var(--transition-fast);
}

.difficulty-badge:hover {
  transform: scale(1.05);
}

.difficulty-moderate {
  background: #FFA726;
  color: white;
}

.difficulty-hard {
  background: #EF5350;
  color: white;
}

.difficulty-very-hard {
  background: #C62828;
  color: white;
}

.difficulty-epic {
  background: #FFD700;
  color: #000;
  font-weight: 800;
}

.route-actions {
  display: flex;
  gap: 0.5rem;
}

.gpx-download {
  padding: 0.5rem 1rem;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--text-primary);
  text-decoration: none;
  transition: var(--transition-fast);
  white-space: nowrap;
}

.gpx-download:hover {
  background: var(--brand-color);
  color: white;
  border-color: var(--brand-color);
  text-decoration: none;
  transform: translateY(-1px);
}

/* Route Content */
.route-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.route-item.active .route-content {
  max-height: 2000px;
}

.route-content-inner {
  padding: 0 1.5rem 1.5rem 1.5rem;
}

.route-description {
  margin: 0 0 1.5rem 0;
  padding: 1rem;
  background: var(--bg-secondary);
  border-left: 3px solid var(--brand-color);
  border-radius: 4px;
  font-style: italic;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* Map and Elevation */
.route-map {
  height: 500px;
  width: 100%;
  border-radius: var(--radius-sm);
  margin-bottom: 1.5rem;
  border: 1px solid var(--border-light);
  overflow: hidden;
  background: #aad3df;
}

.route-map .leaflet-tile-container {
  opacity: 1 !important;
}

.route-map .leaflet-tile,
.route-map .leaflet-tile-pane img,
.route-map img.leaflet-tile {
  opacity: 1 !important;
  visibility: visible !important;
  width: 256px !important;
  height: 256px !important;
  max-width: 256px !important;
  max-height: 256px !important;
  min-width: 256px !important;
  min-height: 256px !important;
}

.route-map .leaflet-layer {
  opacity: 1 !important;
}

.route-map img {
  max-width: none !important;
  width: auto !important;
  height: auto !important;
}

.route-map .leaflet-overlay-pane {
  z-index: 400 !important;
  pointer-events: none !important;
}

.route-map .leaflet-overlay-pane svg,
.route-map svg.leaflet-zoom-animated {
  overflow: visible !important;
  max-width: none !important;
  max-height: none !important;
  min-width: 0 !important;
  min-height: 0 !important;
  display: block !important;
  position: absolute !important;
}

main .container .prose .route-map svg,
.route-map .leaflet-overlay-pane svg,
.route-map svg {
  max-width: none !important;
  max-height: none !important;
  height: initial !important;
  width: initial !important;
}

.route-map .leaflet-overlay-pane path,
.route-map path.leaflet-interactive,
.route-map svg path,
.route-map path.route-polyline {
  visibility: visible !important;
  display: block !important;
  opacity: 0.8 !important;
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  stroke-opacity: 0.8 !important;
  fill: none !important;
  fill-opacity: 0 !important;
  pointer-events: auto !important;
  vector-effect: non-scaling-stroke !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  transform: none !important;
}

path.route-polyline {
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  visibility: visible !important;
  opacity: 0.8 !important;
}

.route-map .leaflet-marker-icon,
.route-map .leaflet-marker-pane img {
  max-width: none !important;
  min-width: 25px !important;
  min-height: 41px !important;
  width: 25px !important;
  height: 41px !important;
}

.route-map .leaflet-marker-shadow {
  max-width: none !important;
  width: 41px !important;
  height: 41px !important;
}

.route-map .custom-marker {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.route-map .custom-marker div {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.elevation-profile {
  height: 300px;
  width: 100%;
  background: white;
  padding: 1rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
}

.elevation-profile canvas {
  max-width: 100% !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .route-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .route-stats-inline {
    font-size: 0.8125rem;
  }

  .route-map {
    height: 400px;
  }

  .elevation-profile {
    height: 250px;
  }
}
</style>

<!-- ROUTES 2-COLUMN LAYOUT -->
<div class="routes-2col-wrapper">

<!-- LEFT COLUMN: NORTH ROUTES -->
<div class="routes-column">

<div class="route-section">
<h2 id="north-routes" class="route-direction-header">North Routes – Andratx → Pollença</h2>
</div>

<div class="route-accordion">
  <!-- Route 1: Vanilla -->
  <div class="route-item" id="route-north-1">
    <div class="route-header" onclick="toggleRoute('north-1')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Vanilla – Port d'Andratx → Port de Pollença</div>
          <div class="route-stats-inline">
            <span>📏 115 km</span>
            <span>⛰️ 2,425 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-vanilla.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Direct classic: SW coastal section → Sóller → Puig Major → aqueduct → Lluc → fast descent into Pollença. Most direct return route.</p>
        <div id="map-north-1" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-1"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 2: Via Caimari -->
  <div class="route-item" id="route-north-2">
    <div class="route-header" onclick="toggleRoute('north-2')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Via Caimari (Vanilla+)</div>
          <div class="route-stats-inline">
            <span>📏 137 km</span>
            <span>⛰️ 2,700 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-via-caimari.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">As above, but continue past the Repsol at Lluc, descend Coll de sa Bataia → lanes via Binibona/Campanet → Alcúdia bay road → Port de Pollença. Second most direct return route. Additional lanes before the finish.</p>
        <div id="map-north-2" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-2"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 3: Port Valldemossa -->
  <div class="route-item" id="route-north-3">
    <div class="route-header" onclick="toggleRoute('north-3')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Incl. Port Valldemossa</div>
          <div class="route-stats-inline">
            <span>📏 132 km</span>
            <span>⛰️ 3,000 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-portvalldemossa.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coastal section + drop/return Port Valldemossa → Sóller → Puig Major → Lluc → descend to Pollença. Great addition to the vanilla route.</p>
        <div id="map-north-3" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-3"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 4: Valldemossa & Sa Calobra -->
  <div class="route-item" id="route-north-4">
    <div class="route-header" onclick="toggleRoute('north-4')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Incl. Port Valldemossa & Sa Calobra</div>
          <div class="route-stats-inline">
            <span>📏 158 km</span>
            <span>⛰️ 3,949 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-valldemossa-sacalobra.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coastal section + Port Valldemossa, then Puig Major → left at aqueduct → Coll dels Reis → down Sa Calobra, climb back → Lluc → descend to Pollença. Hard.</p>
        <div id="map-north-4" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-4"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 5: Big Daddy -->
  <div class="route-item" id="route-north-5">
    <div class="route-header" onclick="toggleRoute('north-5')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Big Daddy Challenge (8 classified cols)</div>
          <div class="route-stats-inline">
            <span>📏 162 km</span>
            <span>⛰️ 4,267 m</span>
            <span class="difficulty-badge difficulty-very-hard">Very Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-big-daddy.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coastal section + Port des Canonge + Port Valldemossa → long side Puig Major → aqueduct → Coll dels Reis → Sa Calobra (down & up) → Lluc → Pollença/Port. Very hard.</p>
        <div id="map-north-5" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-5"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 6: Coll de Sóller & Orient Valley -->
  <div class="route-item" id="route-north-6">
    <div class="route-header" onclick="toggleRoute('north-6')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Return via the Coll de Sóller and the Orient Valley</div>
          <div class="route-stats-inline">
            <span>📏 137 km</span>
            <span>⛰️ 2,360 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-colldesoller-orient.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Complete the classic coastal section then take on the 51 switchbacks by going up and over the Coll de Sóller before cruising through the tranquil Orient Valley. One more for the climbers amongst us. Great day out. The recovery drinks will be well earned that evening!</p>
        <div id="map-north-6" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-6"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

<!-- RIGHT COLUMN: SOUTH ROUTES -->
<div class="routes-column">

<div class="route-section">
<h2 id="south-routes" class="route-direction-header">South Routes – Pollença → Andratx</h2>
</div>

<div class="route-accordion">
  <!-- Route 6: South Vanilla -->
  <div class="route-item" id="route-south-1">
    <div class="route-header" onclick="toggleRoute('south-1')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Vanilla – Port de Pollença → Port d'Andratx</div>
          <div class="route-stats-inline">
            <span>📏 121 km</span>
            <span>⛰️ 2,700 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-vanilla.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coll de Femenia → past Lluc/Sa Calobra turn → easy side Puig Major → 14 km descent to Sóller → coast via Deià, Valldemossa, Banyalbufar, Estellencs → Port d'Andratx. Most direct return route. Brilliant!</p>
        <div id="map-south-1" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-1"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 7: Canonge & Valldemossa -->
  <div class="route-item" id="route-south-2">
    <div class="route-header" onclick="toggleRoute('south-2')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Incl. Port des Canonge & Port Valldemossa</div>
          <div class="route-stats-inline">
            <span>📏 145 km</span>
            <span>⛰️ 3,390 m</span>
            <span class="difficulty-badge difficulty-hard">Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-canonge-valldemossa.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Femenia → Lluc → Puig Major → Sóller → coast + add-ons: drop/return Port des Canonge and Port Valldemossa → SW coastal finish to Andratx.</p>
        <div id="map-south-2" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-2"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 8: Via Puigpunyent -->
  <div class="route-item" id="route-south-3">
    <div class="route-header" onclick="toggleRoute('south-3')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Via Puigpunyent</div>
          <div class="route-stats-inline">
            <span>📏 125 km</span>
            <span>⛰️ 2,650 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderate</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-puigpunyent.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Femenia → Lluc → Puig Major → Sóller → Deià → Valldemossa → Esporles → Puigpunyent → Galilea → Es Capdellà → Port d'Andratx. Spend a little time away from the coast and off the grid!</p>
        <div id="map-south-3" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-3"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 9: Big Daddy Reverse -->
  <div class="route-item" id="route-south-4">
    <div class="route-header" onclick="toggleRoute('south-4')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Big Daddy Challenge (reverse)</div>
          <div class="route-stats-inline">
            <span>📏 167 km</span>
            <span>⛰️ 4,121 m</span>
            <span class="difficulty-badge difficulty-very-hard">Very Hard</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-big-daddy.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">As above conceptually, including the three "ports" (Canonge, Valldemossa, Sa Calobra). For strong climbers only.</p>
        <div id="map-south-4" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-4"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 10: Cap de Formentor -->
  <div class="route-item" id="route-south-5">
    <div class="route-header" onclick="toggleRoute('south-5')">
      <div class="route-title-section">
        <span class="route-icon">▶</span>
        <div>
          <div class="route-title">Return via Cap de Formentor</div>
          <div class="route-stats-inline">
            <span>📏 162 km</span>
            <span>⛰️ 3,500 m</span>
            <span class="difficulty-badge difficulty-epic">Epic</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-formentor.gpx" download class="gpx-download" onclick="event.stopPropagation()">⬇ GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Complete the classic coast to coast but include what is regarded by some as the best 20km of road for cyclists in Europe - the out and back to the lighthouse of Cap de Formentor. Epic day out!</p>
        <div id="map-south-5" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-5"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

</div>

<script>
// Toggle info card expansion
function toggleCard(card) {
  const wasExpanded = card.classList.contains('expanded');
  const grid = card.closest('.info-cards-grid');

  // Close all other cards
  document.querySelectorAll('.info-card.expanded').forEach(c => {
    c.classList.remove('expanded');
  });

  // Toggle this card
  if (!wasExpanded) {
    card.classList.add('expanded');
    grid.classList.add('has-expanded');
  } else {
    grid.classList.remove('has-expanded');
  }
}

// Smooth scroll to product panel (CTA card click)
function smoothScrollToProduct(event) {
  // Prevent any default behavior
  if (event) {
    event.stopPropagation();
  }

  const target = document.getElementById('finishers-gear');
  if (target) {
    target.scrollIntoView({
      behavior: 'smooth',
      block: 'start'
    });
  }
}

// Route configuration
// Using -web.gpx files for display (75% smaller), original files for downloads
const routes = {
  'north-1': { gpx: 'portandratx-pollenca-vanilla-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-2': { gpx: 'portandratx-pollenca-via-caimari-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-3': { gpx: 'portandratx-pollenca-portvalldemossa-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-4': { gpx: 'portandratx-pollenca-valldemossa-sacalobra-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-5': { gpx: 'portandratx-pollenca-big-daddy-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'north-6': { gpx: 'portandratx-pollenca-colldesoller-orient-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollença' },
  'south-1': { gpx: 'portpollenca-portandratx-vanilla-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-2': { gpx: 'portpollenca-portandratx-canonge-valldemossa-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-3': { gpx: 'portpollenca-portandratx-puigpunyent-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-4': { gpx: 'portpollenca-portandratx-big-daddy-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' },
  'south-5': { gpx: 'portpollenca-portandratx-formentor-web.gpx', startName: 'Port de Pollença', endName: 'Port d\'Andratx' }
};

const loadedRoutes = {};

// Toggle accordion item
function toggleRoute(routeId) {
  const item = document.getElementById('route-' + routeId);
  const wasActive = item.classList.contains('active');
  const wrapper = document.querySelector('.routes-2col-wrapper');

  // Close all other items
  document.querySelectorAll('.route-item').forEach(el => {
    el.classList.remove('active');
  });

  // Open this item if it wasn't active
  if (!wasActive) {
    item.classList.add('active');
    wrapper.classList.add('has-expanded');

    // Load route if not already loaded
    if (!loadedRoutes[routeId]) {
      loadRoute(routeId);
      loadedRoutes[routeId] = true;
    }
  } else {
    wrapper.classList.remove('has-expanded');
  }
}

// Load and render a route
async function loadRoute(routeId) {
  const config = routes[routeId];
  if (!config) return;

  try {
    // Fetch GPX
    const response = await fetch('/routes/' + config.gpx);
    const gpxText = await response.text();
    const parser = new DOMParser();
    const gpxDoc = parser.parseFromString(gpxText, 'text/xml');

    // Extract coordinates
    const trkpts = Array.from(gpxDoc.querySelectorAll('trkpt'));
    const coordinates = trkpts.map(pt => ({
      lat: parseFloat(pt.getAttribute('lat')),
      lon: parseFloat(pt.getAttribute('lon')),
      ele: parseFloat(pt.querySelector('ele').textContent)
    }));

    // Render map
    renderMap(routeId, coordinates, config);

    // Render elevation chart
    renderElevationChart(routeId, coordinates);

  } catch (error) {
    console.error('Error loading route:', error);
  }
}

// Render map
function renderMap(routeId, coordinates, config) {
  const mapId = 'map-' + routeId;
  const mapDiv = document.getElementById(mapId);

  // Initialize map
  const map = L.map(mapId).setView([coordinates[0].lat, coordinates[0].lon], 10);

  // Add tiles
  const tileLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors',
    maxZoom: 19
  });

  tileLayer.addTo(map);

  // Add route line
  const routeLine = L.polyline(coordinates.map(c => [c.lat, c.lon]), {
    color: '#f10000',
    weight: 3,
    opacity: 0.8,
    fillOpacity: 0,
    lineCap: 'round',
    lineJoin: 'round',
    className: 'route-polyline',
    smoothFactor: 0,
    noClip: true
  }).addTo(map);

  routeLine.bringToFront();

  // Create custom marker icons
  const startIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#00ff00;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  const endIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#ff0000;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  // Add markers
  L.marker([coordinates[0].lat, coordinates[0].lon], { icon: startIcon })
    .addTo(map)
    .bindPopup('<strong>Start:</strong> ' + config.startName);

  const lastIdx = coordinates.length - 1;
  L.marker([coordinates[lastIdx].lat, coordinates[lastIdx].lon], { icon: endIcon })
    .addTo(map)
    .bindPopup('<strong>End:</strong> ' + config.endName);

  // Fit bounds
  map.fitBounds(routeLine.getBounds(), { padding: [50, 50] });

  // Force resize after animation
  setTimeout(() => {
    map.invalidateSize();
  }, 500);
}

// Render elevation chart
function renderElevationChart(routeId, coordinates) {
  const chartId = 'chart-' + routeId;
  const ctx = document.getElementById(chartId).getContext('2d');

  // Calculate cumulative distance
  const distancePoints = [0];
  for (let i = 1; i < coordinates.length; i++) {
    const lat1 = coordinates[i-1].lat * Math.PI / 180;
    const lat2 = coordinates[i].lat * Math.PI / 180;
    const dLat = (coordinates[i].lat - coordinates[i-1].lat) * Math.PI / 180;
    const dLon = (coordinates[i].lon - coordinates[i-1].lon) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(lat1) * Math.cos(lat2) *
              Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    distancePoints.push(distancePoints[i-1] + 6371 * c);
  }

  // Sample data
  const sampleRate = 10;
  const sampledDistances = distancePoints.filter((_, i) => i % sampleRate === 0);
  const sampledElevations = coordinates.filter((_, i) => i % sampleRate === 0).map(c => c.ele);

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: sampledDistances.map(d => d.toFixed(1)),
      datasets: [{
        label: 'Elevation (m)',
        data: sampledElevations,
        borderColor: '#f10000',
        backgroundColor: 'rgba(241, 0, 0, 0.1)',
        borderWidth: 2,
        fill: true,
        tension: 0.4,
        pointRadius: 0
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            title: (context) => 'Distance: ' + context[0].label + ' km',
            label: (context) => 'Elevation: ' + context.parsed.y.toFixed(0) + ' m'
          }
        }
      },
      scales: {
        x: {
          title: { display: true, text: 'Distance (km)' },
          ticks: { maxTicksLimit: 15 }
        },
        y: {
          title: { display: true, text: 'Elevation (m)' }
        }
      },
      interaction: {
        intersect: false,
        mode: 'index'
      }
    }
  });
}

</script>

<!-- Finisher's T-Shirt Product -->
<div id="finishers-gear" class="finishers-tshirt" style="margin: 4rem auto 3rem; max-width: 900px; scroll-margin-top: 2rem;">
<a href="https://mallorcacycleshuttle.company.site/products/Andratx-Pollenca-Finishers-Unisex-Classic-T-p788401800" target="_blank" rel="noopener noreferrer" style="text-decoration: none; display: block;">
<div style="background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); overflow: hidden; transition: var(--transition-fast); display: flex; flex-wrap: wrap; align-items: center;">
<div style="flex: 1 1 350px; min-width: 300px;">
<img src="/img/finishers-tshirt-andratx-pollenca.webp" alt="Andratx-Pollença Finisher's T-Shirt" style="width: 100%; height: 100%; object-fit: cover; display: block;">
</div>
<div style="flex: 1 1 400px; padding: 2.5rem;">
<h2 style="color: var(--brand-color); margin-bottom: 0.75rem; font-size: 1.75rem; font-weight: 600;">Commemorate Your Ride</h2>
<h3 style="color: var(--text-primary); font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem;">Andratx-Pollença Finisher's T-Shirt</h3>
<p style="color: var(--text-secondary); font-size: 1rem; margin-bottom: 1.5rem; line-height: 1.5;">Celebrate completing this epic route with our exclusive finisher's t-shirt. Available in multiple colors and sizes.</p>
<div style="display: inline-block; padding: 0.75rem 1.75rem; background: var(--brand-color); color: white; border-radius: var(--radius-sm); font-size: 1rem; font-weight: 600; box-shadow: 0 2px 8px rgba(241, 0, 0, 0.2);">
Shop Now →
</div>
</div>
</div>
</a>
</div>

<style>
/* Hover effects for finisher's t-shirt */
.finishers-tshirt a > div:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: rgba(241, 0, 0, 0.2);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .finishers-tshirt > a > div {
    flex-direction: column;
  }

  .finishers-tshirt > a > div > div:first-child {
    max-height: 350px;
  }
}
</style>

## Related Cycling Routes

Ready to tackle more of Mallorca's iconic climbs? Explore these challenging routes:

- **[Sa Calobra Guide](/en/bike-shuttle/sa-calobra-guide/)** - The legendary 26-hairpin descent and climb, Mallorca's most famous road
- **[Cap de Formentor Guide](/en/bike-shuttle/cap-formentor-guide/)** - Spectacular coastal cycling to the lighthouse at Mallorca's northern tip
- **[Big Daddy Challenge](/en/bike-shuttle/big-daddy-challenge/)** - Combine Andratx-Pollença with Sa Calobra and more for the ultimate challenge
