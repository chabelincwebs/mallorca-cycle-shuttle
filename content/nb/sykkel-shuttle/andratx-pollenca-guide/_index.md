---
title: "Mesters Sykkelguide: Andratx til Pollen√ßa"
description: "Komplett guide for sykling fra Andratx til Pollen√ßa gjennom Tramuntana-fjellene"
translationKey: "guide-andratx-pollenca"
---

<p class="header-subtitle">
Vi sier ikke at det er enkelt. Vi sier ikke at det er for alle.
</p>

<div class="hero-intro-banner">
<div class="hero-intro-content">
<p class="hero-intro-centered fade-in-up">
Vi sier at det er <strong>fantastisk</strong>.
</p>
<p class="hero-intro-main fade-in-up delay-1">
For din <a href="#north-routes" class="highlight-red hero-link">"Beste Dag Noensinne P√• En Sykkel"</a> sykl fra <strong>Port d'Andratx</strong> til <strong>Port de Pollen√ßa</strong> gjennom Mallorcas fantastiske <span class="highlight">Serra de Tramuntana</span>-fjell for den ultimate <a href="#south-routes" class="highlight-red hero-link">Kyst-til-Kyst</a> opplevelsen
</p>
<p class="hero-intro-features fade-in-up delay-2">
Scenic utfordrende stigninger ‚Ä¢ Svingete nedkj√∏ringer ‚Ä¢ Sm√∏rglatt asfalt ‚Ä¢ Regelmessige kaf√©stopp ‚Ä¢ Sykklerparadis
</p>
</div>
</div>

<style>
/* ============================================
   APPLE 2025 DESIGN SYSTEM
   ============================================ */

/* System Font Stack */
:root {
  --font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  --brand-color: #f10000;
  --text-primary: #1d1d1f;
  --text-secondary: #6e6e73;
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f7;
  --border-light: #d2d2d7;
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
  --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
}

/* Typography Reset */
h1, h2, h3, p {
  font-family: var(--font-system);
  font-weight: normal;
  margin: 0;
}

/* Page Title */
h1 {
  text-align: center;
  margin-bottom: 0.75rem;
  font-size: 3rem;
  font-weight: 700;
  color: var(--text-primary);
  letter-spacing: -0.02em;
}

/* Header Subtitle */
.header-subtitle {
  font-size: 1.25rem;
  line-height: 1.5;
  color: var(--text-secondary);
  font-weight: 500;
  font-style: italic;
  text-align: center;
  margin: 0 auto 3rem auto;
  max-width: 800px;
}

/* Hero Intro Banner - Clean Card */
.hero-intro-banner {
  margin: 0 auto 4rem auto;
  padding: 3rem 2.5rem;
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  max-width: 1000px;
}

.hero-intro-content {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Centered "brilliant" Line */
.hero-intro-centered {
  font-size: 2.5rem;
  line-height: 1.2;
  font-weight: 700;
  text-align: center;
  color: var(--text-primary);
  letter-spacing: -0.03em;
}

.hero-intro-centered strong {
  color: var(--brand-color);
}

/* Main Intro Paragraph */
.hero-intro-main {
  font-size: 1.25rem;
  line-height: 1.6;
  color: var(--text-primary);
  font-weight: 400;
  text-align: center;
  letter-spacing: -0.01em;
}

.hero-intro-main strong {
  font-weight: 600;
}

.hero-intro-main .highlight {
  font-weight: 600;
}

.hero-intro-main .highlight-red {
  background: linear-gradient(90deg, #f10000 0%, #ff4444 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
  font-size: 1.15em;
  letter-spacing: -0.02em;
}

/* Hero Links */
.hero-link {
  text-decoration: none;
  display: inline-block;
  transition: var(--transition-fast);
}

.hero-link:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(241, 0, 0, 0.3);
}

/* Smooth scroll */
html {
  scroll-behavior: smooth;
}

/* Features Line */
.hero-intro-features {
  font-size: 1rem;
  line-height: 1.5;
  color: var(--text-secondary);
  text-align: center;
  font-weight: 400;
}

/* Fade-in animations - faster */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  opacity: 0;
}

.fade-in-up.delay-1 {
  animation-delay: 0.15s;
}

.fade-in-up.delay-2 {
  animation-delay: 0.3s;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  h1 {
    font-size: 2rem;
  }

  .header-subtitle {
    font-size: 1.1rem;
    margin-bottom: 2rem;
    padding: 0 1rem;
  }

  .hero-intro-banner {
    padding: 2rem 1.5rem;
    margin-bottom: 3rem;
  }

  .hero-intro-centered {
    font-size: 1.75rem;
  }

  .hero-intro-main {
    font-size: 1.1rem;
  }
}
</style>

<!-- INFO CARDS GRID -->
<div class="info-cards-wrapper">
<div class="info-cards-grid">

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üì∏</span>
<span class="card-toggle">+</span>
</div>
<h3>√òyeblikksbilde</h3>
</div>
<div class="info-card-content">
<p><strong>Hvorfor denne ruten:</strong> Kyst-til-kyst gjennom Tramuntana-fjellkjeden langs kysten p√• glatt asfalt ‚Äì Mallorcas beste dag p√• sykkel. Sannsynligvis din beste dag p√• sykkel. Noensinne.</p>
<p><strong>Slik fungerer det:</strong> Buss ut, sykkel tilbake. Ta den planlagte sykkelsbussen til Port d'Andratx (eller omvendt til Port de Pollen√ßa), sykl en av de foresl√•tte eller din egen tilpassede rute tilbake.</p>
<p><strong>Planlagte tjenester:</strong> Vi tar oss av logistikken, du tar deg av √• slappe av og nyte det beste Mallorca har √• tilby. Bestill den <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">planlagte sykkelsbussen</a> fra hvilken som helst av avgangsstedene p√• bestillingsplattformen.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üîë</span>
<span class="card-toggle">+</span>
</div>
<h3>N√∏kkelseksjoner</h3>
</div>
<div class="info-card-content">
<p><strong>Estellencs til Dei√†:</strong> Kystkj√∏nn.</p>
<p><strong>Banyalbufar:</strong> Nok sagt.</p>
<p><strong>Puig Major (fra S√≥ller):</strong> 14 km @ 6,2%, ~828 m. Lang, jevn; opplyst tunnel(er) deretter akvedukt.</p>
<p><strong>Coll dels Reis / Sa Calobra:</strong> Valgfri tilleggsseksjon ‚Äì kj√∏r ned til havnen, klatre tilbake opp; bucket-list h√•rn√•lssvinger.</p>
<p><strong>Port Valldemossa & Port des Canonge:</strong> Korte, bratte, vakre blindvei nedkj√∏ringer og returer; "mini Sa Calobra"-f√∏lelse uten trafikken.</p>
<p><strong>Coll de Sa Bataia (fra Lluc-siden):</strong> F√∏rer til Caimari-nedkj√∏ringen og veier til bukta.</p>
<p><strong>Coll de S√≥ller (alternativ linje):</strong> Svingete klassiker hvis du unng√•r MA-10 h√∏yruten.</p>
<p><strong>Coll de Femenia (nordsiden):</strong> Portal-klatring som forlater Pollen√ßa mot Lluc.</p>
<p><strong>Coll de Femenia (nordsiden):</strong> Portal F1-stil nedkj√∏ring fra Lluc til Pollen√ßa.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">‚òï</span>
<span class="card-toggle">+</span>
</div>
<h3>Kaf√©/P√•fyllingsstopp</h3>
</div>
<div class="info-card-content">
<p><em>km estimater fra Andratx</em></p>
<p><strong>Es Grau (‚âà13 km):</strong> Balkongutsikt over klippene; rask kaffe.</p>
<p><strong>Estellencs (‚âà17 km):</strong> "Cafeter√≠a Estellencs" ‚Äì Enkel, praktisk, rett p√• MA-10.</p>
<p><strong>Banyalbufar (‚âà24 km):</strong> Son Tom√°s (rekkevidde + utsikt) eller Bellavista (flott utsikt; pass p√• syklene).</p>
<p><strong>Valldemossa (‚âà39 km):</strong> Flere alternativer; Ca'n Molinas for Cocas de Patata med varm sjokolade.</p>
<p><strong>Dei√† (‚âà48 km):</strong> Bakeri i supermarkedet drevet av Marc & Vincent Reyn√©s; deres kaf√© i Port de S√≥ller ogs√•.</p>
<p><strong>S√≥ller (‚âà58 km) ‚Äì Sa Frontera:</strong> Solid meny f√∏r Puig Major.</p>
<p><strong>Port de S√≥ller (omvei):</strong> Alternativer ved vannet; Reyn√©s Cycling Caf√© for kake/kaffe.</p>
<p><strong>Akvedukt / Sa Calobra-svingen (‚âà80 km):</strong> OJ Shack ‚Äì fersk appelsinjuice + snacks p√• sykkelen.</p>
<p><strong>Lluc / Coll de sa Bataia topp (‚âà89 km):</strong> Repsol + kaf√© eller Lluc Monastery ‚Äì raskt eller sitteplaatser.</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üí°</span>
<span class="card-toggle">+</span>
</div>
<h3>Bra √• Vite</h3>
</div>
<div class="info-card-content">
<ul>
<li>Bestill tidlig i turen mens beina fortsatt er friske & selv med 308 soldager hvert √•r, hvis v√¶r for√•rsaker en avlysning, har du fortsatt en alternativ dag.</li>
<li>Plasser er begrenset. Bestill tidlig.</li>
<li>Dette vil uten tvil v√¶re din beste dag p√• Mallorca.</li>
<li>Ankomme 10 minutter tidlig for sykkelpakning p√• dagen.</li>
<li>Det er en tidlig start, mange steder for frokost, kaffe, toalett ved ankomst.</li>
<li><strong>Redningsdekning:</strong> <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">Ro i sinnet</a>. Sterkt anbefalt. Sykler og kropper g√•r noen ganger i stykker.</li>
<li>Sikker lasting av sykler i tilhengerne: Pakket mellom madrasser ‚Äì sikkert og trygt.</li>
<li>Gjennomsnittlig returtid er litt over 6 timer pluss stopp p√• vanilla (korteste) ruten.</li>
<li>Kaf√©topp dukker opp regelmessig, valg er aldri mer enn en time fra hverandre.</li>
<li>Regelmessig p√•fylling er essensielt.</li>
</ul>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üìÖ</span>
<span class="card-toggle">+</span>
</div>
<h3>Timeplan</h3>
</div>
<div class="info-card-content">
<p>Bruk sykkelsbussen til Port d'Andratx fra Port de Pollen√ßa/Alc√∫dia/Playa de Muro og fra Peguera, Playa de Palma & Santa Ponsa til Port de Pollen√ßa.</p>
<p><a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer" class="cta">Se Timeplan & Bestill ‚Üí</a></p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">‚≠ê</span>
<span class="card-toggle">+</span>
</div>
<h3>Sosial Bevis</h3>
</div>
<div class="info-card-content">
<p><strong>"18 svenske damer" vitnesbyrd (2016):</strong> 162 km Big Daddy-dag kalt "beste dag noensinne p√• sykkel" ‚Äì elsket Canonge, Valldemossa, Sa Calobra; tunneler opplyst; rask finish til Pollen√ßa. Returnerer neste sesong.</p>
<p><strong>John McCracken (v√•ren 2025):</strong> Enveiformat lar deg nyte utsikten uten √• gj√∏re det om til en ultradistanse-dag; h√∏ydepunkter: Gramola-start, MA-10 klippeseksjoner, Monn√†ber tunneltiln√¶rming til Puig Major, Femenia-nedkj√∏ring "slipp l√∏s."</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üìä</span>
<span class="card-toggle">+</span>
</div>
<h3>N√∏kkelstatistikk</h3>
</div>
<div class="info-card-content">
<p><strong>Signaturklatring:</strong> Puig Major fra S√≥ller (s√∏rover) ‚Äì 14 km @ 6,2% (‚âà828 m).</p>
<p><strong>Signaturnedkj√∏ring:</strong> Puig Major til S√≥ller (nordover) ‚Äì 14 km @ 6,2% (‚âà828 m).</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üì∑</span>
<span class="card-toggle">+</span>
</div>
<h3>Minneskaper!</h3>
</div>
<div class="info-card-content">
<p><strong>Port de Valldemossa:</strong> Mini & kanskje bedre? versjon av Sa Calobra (ned & tilbake).</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üç∞</span>
<span class="card-toggle">+</span>
</div>
<h3>Raske P√•fyllingstips</h3>
</div>
<div class="info-card-content">
<p><strong>Rask p√•fylling for √• komme deg hjem:</strong> OJ shack ved akvedukten eller Sa Bataia kaf√©/garasje (nordover), Estellencs (s√∏rover).</p>
<p><strong>Vakker p√•fylling:</strong> Banyalbufar & Dei√†.</p>
<p><strong>Soller er omtrent halvveis.</strong></p>
<p><strong>Kaf√©er er aldri mer enn en time fra hverandre.</strong></p>
</div>
</div>

<div class="info-card" onclick="window.open('https://mallorcacycleshuttle.company.site/products/Andratx-Pollenca-Finishers-Unisex-Classic-T-p788401800', '_blank')" style="cursor: pointer;">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üëï</span>
<span class="card-toggle">+</span>
</div>
<h3>Finisher-utstyr</h3>
</div>
<div class="info-card-content">
<p><strong>Feir din prestasjon!</strong></p>
<p>F√• din eksklusive Port d'Andratx-Port de Pollen√ßa finisher t-skjorte og vis verden at du erobret denne episke ruten.</p>
<p style="color: var(--brand, #f10000); font-weight: 600; margin-top: 1rem;">Handle N√• ‚Üí</p>
</div>
</div>

<div class="info-card" onclick="window.open('https://mallorcacycleshuttle.company.site/products/Departure-towns-c28971057', '_blank')" style="cursor: pointer;">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üöå</span>
<span class="card-toggle">+</span>
</div>
<h3>Bestill Din Shuttle</h3>
</div>
<div class="info-card-content">
<p><strong>Trenger du skyss for √• starte ditt eventyr?</strong></p>
<p>Se alle avgangsbyene og bestill din shuttle til Port d'Andratx eller Port de Pollen√ßa. Vi har deg dekket!</p>
<p style="color: var(--brand, #f10000); font-weight: 600; margin-top: 1rem;">Se Shuttles ‚Üí</p>
</div>
</div>

<div class="info-card" onclick="toggleCard(this)">
<div class="info-card-header">
<div class="info-card-header-top">
<span class="info-icon">üìã</span>
<span class="card-toggle">+</span>
</div>
<h3>Kommer Snart</h3>
</div>
<div class="info-card-content">
<p><strong>Mer informasjon kommer snart...</strong></p>
<p>Sjekk igjen senere for flere ressurser og tips for ditt Port d'Andratx-Port de Pollen√ßa eventyr.</p>
</div>
</div>

</div>
</div>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
/* ============================================
   INFO CARDS - CLEAN APPLE STYLE
   ============================================ */

.info-cards-wrapper {
  margin: 3rem auto 4rem auto;
  max-width: 1200px;
}

.info-cards-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

@media (min-width: 768px) {
  .info-cards-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1.25rem;
  }
}

@media (min-width: 1024px) {
  .info-cards-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
}

/* Hide cards when one is expanded */
.info-cards-grid.has-expanded .info-card {
  display: none;
}

.info-cards-grid.has-expanded .info-card.expanded {
  display: block;
}

.info-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  overflow: hidden;
  transition: var(--transition-fast);
  cursor: pointer;
  box-shadow: var(--shadow-sm);
  position: relative;
}

.info-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--brand-color) 0%, #ff4444 100%);
  opacity: 0.3;
  transition: var(--transition-fast);
}

.info-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: rgba(241, 0, 0, 0.2);
}

.info-card:hover::before {
  opacity: 1;
  height: 5px;
}

.info-card.expanded {
  background: var(--bg-primary);
  box-shadow: var(--shadow-lg);
  border-color: rgba(241, 0, 0, 0.3);
  grid-column: 1 / -1;
}

.info-card.expanded::before {
  opacity: 1;
  height: 5px;
}

.info-card-header {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  padding: 1.75rem 1.5rem 1rem 1.5rem;
  user-select: none;
}

.info-card-header-top {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
}

.info-icon {
  font-size: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  filter: grayscale(100%);
  opacity: 0.6;
  transition: var(--transition-fast);
}

.info-card:hover .info-icon {
  filter: grayscale(0%);
  opacity: 1;
  transform: scale(1.1);
}

.info-card-header h3 {
  margin: 0;
  font-size: 1.125rem;
  color: var(--text-primary);
  font-weight: 600;
  line-height: 1.3;
}

.card-toggle {
  font-size: 1.5rem;
  font-weight: 300;
  color: var(--text-secondary);
  transition: var(--transition-fast);
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-secondary);
  border-radius: 50%;
}

.info-card:hover .card-toggle {
  background: rgba(241, 0, 0, 0.1);
  color: var(--brand-color);
}

.info-card.expanded .card-toggle {
  transform: rotate(45deg);
  background: rgba(241, 0, 0, 0.15);
  color: var(--brand-color);
}

.info-card-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s ease;
  padding: 0 1.5rem;
}

.info-card.expanded .info-card-content {
  max-height: 2000px;
  padding: 0 1.5rem 1.5rem 1.5rem;
}

.info-card-content p {
  margin: 0 0 1rem 0;
  line-height: 1.6;
  color: var(--text-primary);
  font-size: 0.9375rem;
}

.info-card-content p:last-child {
  margin-bottom: 0;
}

.info-card-content strong {
  font-weight: 600;
}

.info-card-content a {
  color: var(--brand-color);
  text-decoration: none;
  font-weight: 500;
  transition: var(--transition-fast);
  border-bottom: 1px solid rgba(241, 0, 0, 0.2);
}

.info-card-content a:hover {
  border-bottom-color: var(--brand-color);
}

.info-card-content .cta {
  display: inline-block;
  background: var(--brand-color);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: var(--radius-sm);
  text-decoration: none;
  font-weight: 600;
  margin-top: 1rem;
  transition: var(--transition-fast);
  box-shadow: 0 2px 8px rgba(241, 0, 0, 0.2);
  border: none;
}

.info-card-content .cta:hover {
  background: #d10000;
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(241, 0, 0, 0.3);
}

.info-card-content ul {
  margin: 0;
  padding-left: 1.25rem;
}

.info-card-content li {
  margin-bottom: 0.75rem;
  line-height: 1.6;
  color: var(--text-primary);
  font-size: 0.9375rem;
}

.info-card-content li:last-child {
  margin-bottom: 0;
}

/* ============================================
   ROUTES 2-COLUMN LAYOUT
   ============================================ */

.routes-2col-wrapper {
  display: grid;
  grid-template-columns: 1fr;
  gap: 3rem;
  margin: 4rem auto 3rem auto;
  max-width: 1400px;
}

@media (min-width: 768px) {
  .routes-2col-wrapper {
    grid-template-columns: repeat(2, 1fr);
    gap: 3rem;
  }
}

.routes-column {
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* Hide routes when one is expanded */
.routes-2col-wrapper.has-expanded .route-item {
  display: none;
}

.routes-2col-wrapper.has-expanded .route-item.active {
  display: block;
}

.routes-2col-wrapper.has-expanded .routes-column:has(.route-item.active) {
  grid-column: 1 / -1;
}

.routes-2col-wrapper.has-expanded .routes-column:not(:has(.route-item.active)) {
  display: none;
}

/* Route Section Headers */
.route-section {
  margin: 0 0 2rem 0;
}

.route-section h2 {
  font-size: 2rem;
  font-weight: 700;
  color: var(--text-primary);
  letter-spacing: -0.02em;
  text-align: center;
  padding: 2rem;
  background: var(--bg-primary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  scroll-margin-top: 2rem;
}

/* Route Accordion */
.route-accordion {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin: 0 0 2rem 0;
}

.route-item {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  overflow: hidden;
  transition: var(--transition-fast);
  box-shadow: var(--shadow-sm);
}

.route-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
  border-color: rgba(241, 0, 0, 0.2);
}

.route-item.active {
  background: var(--bg-primary);
  border-color: rgba(241, 0, 0, 0.3);
  box-shadow: var(--shadow-lg);
}

/* Route Header */
.route-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  cursor: pointer;
  user-select: none;
  gap: 1rem;
  flex-wrap: wrap;
  background: transparent;
  transition: var(--transition-fast);
}

.route-header:hover {
  background: rgba(245, 245, 247, 0.5);
}

.route-item.active .route-header {
  padding-bottom: 1.5rem;
}

/* Close X button */
.route-item.active .route-header::after {
  content: '‚úï';
  position: absolute;
  top: 1rem;
  right: 1rem;
  font-size: 1.25rem;
  color: var(--text-secondary);
  font-weight: 600;
  line-height: 1;
  opacity: 0.6;
  transition: opacity 0.2s ease;
}

.route-item.active .route-header:hover::after {
  opacity: 1;
}

.route-title-section {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
  min-width: 200px;
}

.route-icon {
  font-size: 1.25rem;
  transition: transform 0.2s ease;
  color: var(--brand-color);
}

.route-item.active .route-icon {
  transform: rotate(90deg);
}

.route-title {
  font-weight: 600;
  font-size: 1.0625rem;
  color: var(--text-primary);
  line-height: 1.3;
}

.route-stats-inline {
  display: flex;
  gap: 0.75rem;
  color: var(--text-secondary);
  font-size: 0.875rem;
  font-weight: 500;
  flex-wrap: wrap;
  align-items: center;
}

.route-stats-inline span {
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.375rem 0.75rem;
  background: var(--bg-secondary);
  border-radius: 6px;
  transition: var(--transition-fast);
}

.route-stats-inline span:hover {
  background: rgba(245, 245, 247, 0.8);
}

.difficulty-badge {
  display: inline-block;
  padding: 0.375rem 0.875rem;
  border-radius: 6px;
  font-size: 0.6875rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: var(--transition-fast);
}

.difficulty-badge:hover {
  transform: scale(1.05);
}

.difficulty-moderate {
  background: #FFA726;
  color: white;
}

.difficulty-hard {
  background: #EF5350;
  color: white;
}

.difficulty-very-hard {
  background: #C62828;
  color: white;
}

.difficulty-epic {
  background: #FFD700;
  color: #000;
  font-weight: 800;
}

.route-actions {
  display: flex;
  gap: 0.5rem;
}

.gpx-download {
  padding: 0.5rem 1rem;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--text-primary);
  text-decoration: none;
  transition: var(--transition-fast);
  white-space: nowrap;
}

.gpx-download:hover {
  background: var(--brand-color);
  color: white;
  border-color: var(--brand-color);
  text-decoration: none;
  transform: translateY(-1px);
}

/* Route Content */
.route-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.route-item.active .route-content {
  max-height: 2000px;
}

.route-content-inner {
  padding: 0 1.5rem 1.5rem 1.5rem;
}

.route-description {
  margin: 0 0 1.5rem 0;
  padding: 1rem;
  background: var(--bg-secondary);
  border-left: 3px solid var(--brand-color);
  border-radius: 4px;
  font-style: italic;
  color: var(--text-secondary);
  line-height: 1.6;
}

/* Map and Elevation */
.route-map {
  height: 500px;
  width: 100%;
  border-radius: var(--radius-sm);
  margin-bottom: 1.5rem;
  border: 1px solid var(--border-light);
  overflow: hidden;
  background: #aad3df;
}

.route-map .leaflet-tile-container {
  opacity: 1 !important;
}

.route-map .leaflet-tile,
.route-map .leaflet-tile-pane img,
.route-map img.leaflet-tile {
  opacity: 1 !important;
  visibility: visible !important;
  width: 256px !important;
  height: 256px !important;
  max-width: 256px !important;
  max-height: 256px !important;
  min-width: 256px !important;
  min-height: 256px !important;
}

.route-map .leaflet-layer {
  opacity: 1 !important;
}

.route-map img {
  max-width: none !important;
  width: auto !important;
  height: auto !important;
}

.route-map .leaflet-overlay-pane {
  z-index: 400 !important;
  pointer-events: none !important;
}

.route-map .leaflet-overlay-pane svg,
.route-map svg.leaflet-zoom-animated {
  overflow: visible !important;
  max-width: none !important;
  max-height: none !important;
  min-width: 0 !important;
  min-height: 0 !important;
  display: block !important;
  position: absolute !important;
}

main .container .prose .route-map svg,
.route-map .leaflet-overlay-pane svg,
.route-map svg {
  max-width: none !important;
  max-height: none !important;
  height: initial !important;
  width: initial !important;
}

.route-map .leaflet-overlay-pane path,
.route-map path.leaflet-interactive,
.route-map svg path,
.route-map path.route-polyline {
  visibility: visible !important;
  display: block !important;
  opacity: 0.8 !important;
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  stroke-opacity: 0.8 !important;
  fill: none !important;
  fill-opacity: 0 !important;
  pointer-events: auto !important;
  vector-effect: non-scaling-stroke !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  transform: none !important;
}

path.route-polyline {
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  visibility: visible !important;
  opacity: 0.8 !important;
}

.route-map .leaflet-marker-icon,
.route-map .leaflet-marker-pane img {
  max-width: none !important;
  min-width: 25px !important;
  min-height: 41px !important;
  width: 25px !important;
  height: 41px !important;
}

.route-map .leaflet-marker-shadow {
  max-width: none !important;
  width: 41px !important;
  height: 41px !important;
}

.route-map .custom-marker {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.route-map .custom-marker div {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.elevation-profile {
  height: 300px;
  width: 100%;
  background: white;
  padding: 1rem;
  border-radius: var(--radius-sm);
  border: 1px solid var(--border-light);
}

.elevation-profile canvas {
  max-width: 100% !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .route-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .route-stats-inline {
    font-size: 0.8125rem;
  }

  .route-map {
    height: 400px;
  }

  .elevation-profile {
    height: 250px;
  }
}
</style>

<!-- ROUTES 2-COLUMN LAYOUT -->
<div class="routes-2col-wrapper">

<!-- LEFT COLUMN: NORTH ROUTES -->
<div class="routes-column">

<div class="route-section">
<h2 id="north-routes" class="route-direction-header">Nordruter ‚Äì Andratx ‚Üí Pollen√ßa</h2>
</div>

<div class="route-accordion">
  <!-- Route 1: Vanilla -->
  <div class="route-item" id="route-north-1">
    <div class="route-header" onclick="toggleRoute('north-1')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Vanilla ‚Äì Port d'Andratx ‚Üí Port de Pollen√ßa</div>
          <div class="route-stats-inline">
            <span>üìè 115 km</span>
            <span>‚õ∞Ô∏è 2,425 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderat</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-vanilla.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Direkte klassiker: SV kystseksjon ‚Üí S√≥ller ‚Üí Puig Major ‚Üí akvedukt ‚Üí Lluc ‚Üí rask nedkj√∏ring til Pollen√ßa. Mest direkte returrute.</p>
        <div id="map-north-1" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-1"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 2: Via Caimari -->
  <div class="route-item" id="route-north-2">
    <div class="route-header" onclick="toggleRoute('north-2')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Via Caimari (Vanilla+)</div>
          <div class="route-stats-inline">
            <span>üìè 137 km</span>
            <span>‚õ∞Ô∏è 2,700 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderat</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-via-caimari.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Som over, men fortsett forbi Repsol ved Lluc, kj√∏r ned Coll de sa Bataia ‚Üí veier via Binibona/Campanet ‚Üí Alc√∫dia buktveien ‚Üí Port de Pollen√ßa. Andre mest direkte returrute. Ekstra veier f√∏r m√•lgang.</p>
        <div id="map-north-2" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-2"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 3: Port Valldemossa -->
  <div class="route-item" id="route-north-3">
    <div class="route-header" onclick="toggleRoute('north-3')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Inkl. Port Valldemossa</div>
          <div class="route-stats-inline">
            <span>üìè 132 km</span>
            <span>‚õ∞Ô∏è 3,000 m</span>
            <span class="difficulty-badge difficulty-hard">Vanskelig</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-portvalldemossa.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Kystseksjon + ned/tilbake Port Valldemossa ‚Üí S√≥ller ‚Üí Puig Major ‚Üí Lluc ‚Üí kj√∏r ned til Pollen√ßa. Flott tillegg til vanilla-ruten.</p>
        <div id="map-north-3" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-3"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 4: Valldemossa & Sa Calobra -->
  <div class="route-item" id="route-north-4">
    <div class="route-header" onclick="toggleRoute('north-4')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Inkl. Port Valldemossa & Sa Calobra</div>
          <div class="route-stats-inline">
            <span>üìè 158 km</span>
            <span>‚õ∞Ô∏è 3,949 m</span>
            <span class="difficulty-badge difficulty-hard">Vanskelig</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-valldemossa-sacalobra.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Kystseksjon + Port Valldemossa, deretter Puig Major ‚Üí venstre ved akvedukten ‚Üí Coll dels Reis ‚Üí ned Sa Calobra, klatre tilbake ‚Üí Lluc ‚Üí kj√∏r ned til Pollen√ßa. Vanskelig.</p>
        <div id="map-north-4" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-4"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 5: Big Daddy -->
  <div class="route-item" id="route-north-5">
    <div class="route-header" onclick="toggleRoute('north-5')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Big Daddy Challenge (8 klassifiserte stigninger)</div>
          <div class="route-stats-inline">
            <span>üìè 162 km</span>
            <span>‚õ∞Ô∏è 4,267 m</span>
            <span class="difficulty-badge difficulty-very-hard">Sv√¶rt Vanskelig</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-big-daddy.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Kystseksjon + Port des Canonge + Port Valldemossa ‚Üí lang side Puig Major ‚Üí akvedukt ‚Üí Coll dels Reis ‚Üí Sa Calobra (ned & opp) ‚Üí Lluc ‚Üí Pollen√ßa/Port. Sv√¶rt vanskelig.</p>
        <div id="map-north-5" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-5"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 6: Coll de S√≥ller & Orient Valley -->
  <div class="route-item" id="route-north-6">
    <div class="route-header" onclick="toggleRoute('north-6')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Retur via Coll de S√≥ller og Orient-dalen</div>
          <div class="route-stats-inline">
            <span>üìè 137 km</span>
            <span>‚õ∞Ô∏è 2,360 m</span>
            <span class="difficulty-badge difficulty-hard">Vanskelig</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portandratx-pollenca-colldesoller-orient.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Fullf√∏r den klassiske kystseksjonen deretter ta p√• deg de 51 svingene ved √• g√• opp og over Coll de S√≥ller f√∏r du cruiser gjennom den rolige Orient-dalen. En til for klatrerne blant oss. Flott utflukt. Restitusjonsdrinker vil v√¶re velfortjente den kvelden!</p>
        <div id="map-north-6" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-north-6"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

<!-- RIGHT COLUMN: SOUTH ROUTES -->
<div class="routes-column">

<div class="route-section">
<h2 id="south-routes" class="route-direction-header">S√∏rruter ‚Äì Pollen√ßa ‚Üí Andratx</h2>
</div>

<div class="route-accordion">
  <!-- Route 6: South Vanilla -->
  <div class="route-item" id="route-south-1">
    <div class="route-header" onclick="toggleRoute('south-1')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Vanilla ‚Äì Port de Pollen√ßa ‚Üí Port d'Andratx</div>
          <div class="route-stats-inline">
            <span>üìè 121 km</span>
            <span>‚õ∞Ô∏è 2,700 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderat</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-vanilla.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Coll de Femenia ‚Üí forbi Lluc/Sa Calobra-svingen ‚Üí enkel side Puig Major ‚Üí 14 km nedkj√∏ring til S√≥ller ‚Üí kyst via Dei√†, Valldemossa, Banyalbufar, Estellencs ‚Üí Port d'Andratx. Mest direkte returrute. Fantastisk!</p>
        <div id="map-south-1" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-1"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 7: Canonge & Valldemossa -->
  <div class="route-item" id="route-south-2">
    <div class="route-header" onclick="toggleRoute('south-2')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Inkl. Port des Canonge & Port Valldemossa</div>
          <div class="route-stats-inline">
            <span>üìè 145 km</span>
            <span>‚õ∞Ô∏è 3,390 m</span>
            <span class="difficulty-badge difficulty-hard">Vanskelig</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-canonge-valldemossa.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Femenia ‚Üí Lluc ‚Üí Puig Major ‚Üí S√≥ller ‚Üí kyst + tillegg: ned/tilbake Port des Canonge og Port Valldemossa ‚Üí SV kystslutning til Andratx.</p>
        <div id="map-south-2" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-2"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 8: Via Puigpunyent -->
  <div class="route-item" id="route-south-3">
    <div class="route-header" onclick="toggleRoute('south-3')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Via Puigpunyent</div>
          <div class="route-stats-inline">
            <span>üìè 125 km</span>
            <span>‚õ∞Ô∏è 2,650 m</span>
            <span class="difficulty-badge difficulty-moderate">Moderat</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-puigpunyent.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Femenia ‚Üí Lluc ‚Üí Puig Major ‚Üí S√≥ller ‚Üí Dei√† ‚Üí Valldemossa ‚Üí Esporles ‚Üí Puigpunyent ‚Üí Galilea ‚Üí Es Capdell√† ‚Üí Port d'Andratx. Bruk litt tid vekk fra kysten og utenfor kartet!</p>
        <div id="map-south-3" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-3"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 9: Big Daddy Reverse -->
  <div class="route-item" id="route-south-4">
    <div class="route-header" onclick="toggleRoute('south-4')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Big Daddy Challenge (omvendt)</div>
          <div class="route-stats-inline">
            <span>üìè 167 km</span>
            <span>‚õ∞Ô∏è 4,121 m</span>
            <span class="difficulty-badge difficulty-very-hard">Sv√¶rt Vanskelig</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-big-daddy.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Som over konseptuelt, inkludert de tre "havnene" (Canonge, Valldemossa, Sa Calobra). Bare for sterke klatrere.</p>
        <div id="map-south-4" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-4"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 10: Cap de Formentor -->
  <div class="route-item" id="route-south-5">
    <div class="route-header" onclick="toggleRoute('south-5')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Retur via Cap de Formentor</div>
          <div class="route-stats-inline">
            <span>üìè 162 km</span>
            <span>‚õ∞Ô∏è 3,500 m</span>
            <span class="difficulty-badge difficulty-epic">Episk</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-formentor.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Fullf√∏r den klassiske kyst til kyst, men inkluder det som av noen anses som de beste 20 km med vei for syklister i Europa - turen ut og tilbake til fyrt√•rnet p√• Cap de Formentor. Episk utflukt!</p>
        <div id="map-south-5" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-south-5"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

</div>

</div>

<script>
// Toggle info card expansion
function toggleCard(card) {
  const wasExpanded = card.classList.contains('expanded');
  const grid = card.closest('.info-cards-grid');

  // Close all other cards
  document.querySelectorAll('.info-card.expanded').forEach(c => {
    c.classList.remove('expanded');
  });

  // Toggle this card
  if (!wasExpanded) {
    card.classList.add('expanded');
    grid.classList.add('has-expanded');
  } else {
    grid.classList.remove('has-expanded');
  }
}

// Smooth scroll to product panel (CTA card click)
function smoothScrollToProduct(event) {
  // Prevent any default behavior
  if (event) {
    event.stopPropagation();
  }

  const target = document.getElementById('finishers-gear');
  if (target) {
    target.scrollIntoView({
      behavior: 'smooth',
      block: 'start'
    });
  }
}

// Route configuration
// Using -web.gpx files for display (75% smaller), original files for downloads
const routes = {
  'north-1': { gpx: 'portandratx-pollenca-vanilla-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollen√ßa' },
  'north-2': { gpx: 'portandratx-pollenca-via-caimari-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollen√ßa' },
  'north-3': { gpx: 'portandratx-pollenca-portvalldemossa-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollen√ßa' },
  'north-4': { gpx: 'portandratx-pollenca-valldemossa-sacalobra-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollen√ßa' },
  'north-5': { gpx: 'portandratx-pollenca-big-daddy-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollen√ßa' },
  'north-6': { gpx: 'portandratx-pollenca-colldesoller-orient-web.gpx', startName: 'Port d\'Andratx', endName: 'Port de Pollen√ßa' },
  'south-1': { gpx: 'portpollenca-portandratx-vanilla-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Port d\'Andratx' },
  'south-2': { gpx: 'portpollenca-portandratx-canonge-valldemossa-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Port d\'Andratx' },
  'south-3': { gpx: 'portpollenca-portandratx-puigpunyent-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Port d\'Andratx' },
  'south-4': { gpx: 'portpollenca-portandratx-big-daddy-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Port d\'Andratx' },
  'south-5': { gpx: 'portpollenca-portandratx-formentor-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Port d\'Andratx' }
};

const loadedRoutes = {};

// Toggle accordion item
function toggleRoute(routeId) {
  const item = document.getElementById('route-' + routeId);
  const wasActive = item.classList.contains('active');
  const wrapper = document.querySelector('.routes-2col-wrapper');

  // Close all other items
  document.querySelectorAll('.route-item').forEach(el => {
    el.classList.remove('active');
  });

  // Open this item if it wasn't active
  if (!wasActive) {
    item.classList.add('active');
    wrapper.classList.add('has-expanded');

    // Load route if not already loaded
    if (!loadedRoutes[routeId]) {
      loadRoute(routeId);
      loadedRoutes[routeId] = true;
    }
  } else {
    wrapper.classList.remove('has-expanded');
  }
}

// Load and render a route
async function loadRoute(routeId) {
  const config = routes[routeId];
  if (!config) return;

  try {
    // Fetch GPX
    const response = await fetch('/routes/' + config.gpx);
    const gpxText = await response.text();
    const parser = new DOMParser();
    const gpxDoc = parser.parseFromString(gpxText, 'text/xml');

    // Extract coordinates
    const trkpts = Array.from(gpxDoc.querySelectorAll('trkpt'));
    const coordinates = trkpts.map(pt => ({
      lat: parseFloat(pt.getAttribute('lat')),
      lon: parseFloat(pt.getAttribute('lon')),
      ele: parseFloat(pt.querySelector('ele').textContent)
    }));

    // Render map
    renderMap(routeId, coordinates, config);

    // Render elevation chart
    renderElevationChart(routeId, coordinates);

  } catch (error) {
    console.error('Error loading route:', error);
  }
}

// Render map
function renderMap(routeId, coordinates, config) {
  const mapId = 'map-' + routeId;
  const mapDiv = document.getElementById(mapId);

  // Initialize map
  const map = L.map(mapId).setView([coordinates[0].lat, coordinates[0].lon], 10);

  // Add tiles
  const tileLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors',
    maxZoom: 19
  });

  tileLayer.addTo(map);

  // Add route line
  const routeLine = L.polyline(coordinates.map(c => [c.lat, c.lon]), {
    color: '#f10000',
    weight: 3,
    opacity: 0.8,
    fillOpacity: 0,
    lineCap: 'round',
    lineJoin: 'round',
    className: 'route-polyline',
    smoothFactor: 0,
    noClip: true
  }).addTo(map);

  routeLine.bringToFront();

  // Create custom marker icons
  const startIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#00ff00;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  const endIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#ff0000;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  // Add markers
  L.marker([coordinates[0].lat, coordinates[0].lon], { icon: startIcon })
    .addTo(map)
    .bindPopup('<strong>Start:</strong> ' + config.startName);

  const lastIdx = coordinates.length - 1;
  L.marker([coordinates[lastIdx].lat, coordinates[lastIdx].lon], { icon: endIcon })
    .addTo(map)
    .bindPopup('<strong>Slutt:</strong> ' + config.endName);

  // Fit bounds
  map.fitBounds(routeLine.getBounds(), { padding: [50, 50] });

  // Force resize after animation
  setTimeout(() => {
    map.invalidateSize();
  }, 500);
}

// Render elevation chart
function renderElevationChart(routeId, coordinates) {
  const chartId = 'chart-' + routeId;
  const ctx = document.getElementById(chartId).getContext('2d');

  // Calculate cumulative distance
  const distancePoints = [0];
  for (let i = 1; i < coordinates.length; i++) {
    const lat1 = coordinates[i-1].lat * Math.PI / 180;
    const lat2 = coordinates[i].lat * Math.PI / 180;
    const dLat = (coordinates[i].lat - coordinates[i-1].lat) * Math.PI / 180;
    const dLon = (coordinates[i].lon - coordinates[i-1].lon) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(lat1) * Math.cos(lat2) *
              Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    distancePoints.push(distancePoints[i-1] + 6371 * c);
  }

  // Sample data
  const sampleRate = 10;
  const sampledDistances = distancePoints.filter((_, i) => i % sampleRate === 0);
  const sampledElevations = coordinates.filter((_, i) => i % sampleRate === 0).map(c => c.ele);

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: sampledDistances.map(d => d.toFixed(1)),
      datasets: [{
        label: 'H√∏yde (m)',
        data: sampledElevations,
        borderColor: '#f10000',
        backgroundColor: 'rgba(241, 0, 0, 0.1)',
        borderWidth: 2,
        fill: true,
        tension: 0.4,
        pointRadius: 0
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            title: (context) => 'Avstand: ' + context[0].label + ' km',
            label: (context) => 'H√∏yde: ' + context.parsed.y.toFixed(0) + ' m'
          }
        }
      },
      scales: {
        x: {
          title: { display: true, text: 'Avstand (km)' },
          ticks: { maxTicksLimit: 15 }
        },
        y: {
          title: { display: true, text: 'H√∏yde (m)' }
        }
      },
      interaction: {
        intersect: false,
        mode: 'index'
      }
    }
  });
}

</script>

<!-- Finisher's T-Shirt Product -->
<div id="finishers-gear" class="finishers-tshirt" style="margin: 4rem auto 3rem; max-width: 900px; scroll-margin-top: 2rem;">
<a href="https://mallorcacycleshuttle.company.site/products/Andratx-Pollenca-Finishers-Unisex-Classic-T-p788401800" target="_blank" rel="noopener noreferrer" style="text-decoration: none; display: block;">
<div style="background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); overflow: hidden; transition: var(--transition-fast); display: flex; flex-wrap: wrap; align-items: center;">
<div style="flex: 1 1 350px; min-width: 300px;">
<img src="/img/finishers-tshirt-andratx-pollenca.webp" alt="Andratx-Pollen√ßa Finisher T-Skjorte" style="width: 100%; height: 100%; object-fit: cover; display: block;">
</div>
<div style="flex: 1 1 400px; padding: 2.5rem;">
<h2 style="color: var(--brand-color); margin-bottom: 0.75rem; font-size: 1.75rem; font-weight: 600;">Minnes Din Tur</h2>
<h3 style="color: var(--text-primary); font-size: 1.125rem; font-weight: 600; margin-bottom: 0.75rem;">Andratx-Pollen√ßa Finisher T-Skjorte</h3>
<p style="color: var(--text-secondary); font-size: 1rem; margin-bottom: 1.5rem; line-height: 1.5;">Feir fullf√∏ringen av denne episke ruten med v√•r eksklusive finisher t-skjorte. Tilgjengelig i flere farger og st√∏rrelser.</p>
<div style="display: inline-block; padding: 0.75rem 1.75rem; background: var(--brand-color); color: white; border-radius: var(--radius-sm); font-size: 1rem; font-weight: 600; box-shadow: 0 2px 8px rgba(241, 0, 0, 0.2);">
Handle N√• ‚Üí
</div>
</div>
</div>
</a>
</div>

<style>
/* Hover effects for finisher's t-shirt */
.finishers-tshirt a > div:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: rgba(241, 0, 0, 0.2);
}

/* Mobile responsive */
@media (max-width: 768px) {
  .finishers-tshirt > a > div {
    flex-direction: column;
  }

  .finishers-tshirt > a > div > div:first-child {
    max-height: 350px;
  }
}
</style>
