---
title: "Guide Cycliste : Cap de Formentor √† V√©lo"
description: "Guide complet du cyclisme au Cap de Formentor - De Port de Pollen√ßa au phare et retour, avec des vues c√¥ti√®res spectaculaires, des tunnels et des cr√™tes expos√©es"
translationKey: "guide-cap-formentor"
hero_image: "/img/cap-formentor-hero-master-guide.webp"
hero_title: "Guide Cycliste : Cap de Formentor √† V√©lo"
layout: "guide-hero"
type: "bike-shuttle"

stats:
  - icon: "üìè"
    value: "38-42 km"
    label: "Distance Totale"
  - icon: "‚õ∞Ô∏è"
    value: "1200m"
    label: "D√©nivel√© Total"
  - icon: "üìä"
    value: "6-7%"
    label: "Mont√©es Principales"
  - icon: "‚è±Ô∏è"
    value: "1h45-4h"
    label: "Temps de Trajet"

route_cards:
  - title: "Comment S'y Rendre"
    image: "/img/cap-formentor-getting-there.webp"
    excerpt: "Si vous s√©journez √† proximit√©, c'est incontournable. Si vous s√©journez plus loin, prenez un bus v√©lo programm√© ou r√©servez une navette priv√©e pour Port de Pollen√ßa."
    full_content: |
      Port de Pollen√ßa est le point de d√©part naturel pour le parcours du Cap de Formentor. Si vous s√©journez dans la r√©gion, partez simplement de votre h√©bergement.

      Pour ceux qui s√©journent ailleurs sur l'√Æle, envisagez de prendre un <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">bus v√©lo programm√©</a> ou de r√©server une <a href="/fr/navette-velo/reservations-navette-privee/" target="_blank" rel="noopener noreferrer">navette priv√©e</a> pour Port de Pollen√ßa. Cela vous permet de commencer frais et d'√©conomiser de l'√©nergie pour le trajet √† venir.

      Le parcours peut √©galement √™tre combin√© avec le trajet <a href="/fr/navette-velo/guide-andratx-pollenca/" target="_blank" rel="noopener noreferrer">Andratx-Pollen√ßa</a> pour une journ√©e √©pique √† v√©lo.

  - title: "Aper√ßu du Parcours"
    image: "/img/cap-formentor-route.webp"
    excerpt: "Aller-retour sur la Ma-2210 avec deux mont√©es principales : Coll de Sa Creueta au Mirador Es Colomer, puis au retour de la plage de Formentor au Mirador Es Colomer."
    full_content: |
      Le parcours est un aller-retour sur la Ma-2210 avec deux sections principales de mont√©e :

      **Port de Pollen√ßa ‚Üí Mirador Es Colomer (Coll de Sa Creueta)**
      Mont√©e de 4 km √† environ 6‚Äì7% de pente avec des √©pingles menant √† un point de vue spectaculaire.

      **Retour : Plage de Formentor (Platja de Formentor) ‚Üí Mirador**
      Mont√©e similaire de 4 km √† environ 6‚Äì7% de pente avec des √©pingles surplombant la mer revenant au point de vue.

      **Plage ‚Üí Phare (Faro de Formentor)**
      Plus expos√© avec des ch√®vres et un peu d'ombre d'une for√™t de pins, menant √† des vues spectaculaires sur Cala Murta avant le tunnel (√©clair√©) de quelques centaines de m√®tres. Plusieurs rampes piquantes, avec la rampe finale particuli√®rement difficile au retour.

      **Ajouts optionnels :** La route lat√©rale tr√®s raide de Talaia d'Albercutx depuis le Mirador Es Colomer offre des vues imprenables mais pr√©sente des pentes de 10‚Äì14%+ sur des surfaces rugueuses sur environ 3 km. Une pause √† Platja de Formentor est √©galement recommand√©e. Nourrir les ch√®vres au phare avec vos barres √©nerg√©tiques ch√®res peut √™tre n√©cessaire ! Le caf√© au phare est g√©n√©ralement ouvert par beau temps de mars √† octobre de 10h00 √† 16h00, mais ne comptez pas dessus.

  - title: "S√©curit√© et Pr√©paration"
    image: "/img/cap-formentor-safety.webp"
    excerpt: "√âclairages avant/arri√®re obligatoires pour les tunnels. Le vent peut rendre les cr√™tes expos√©es. Assurez-vous d'avoir votre police Mallorca Bike Rescue au cas o√π le v√©lo ou le corps vous l√¢cherait."
    full_content: |
      **√âquipement de S√©curit√© Essentiel :**
      - √âclairages avant et arri√®re (obligatoires pour les tunnels - retirez les lunettes de soleil √† l'int√©rieur)
      - Coupe-vent pour les sections expos√©es et les descentes
      - 2 bidons pleins (ne comptez pas sur les robinets en cours de route)
      - Pi√®ce d'identit√© et t√©l√©phone (WhatsApp fonctionne bien pour partager la position)
      - Chambres √† air de rechange/kit de r√©paration, mini-pompe/CO‚ÇÇ, multi-outil, patte de d√©railleur

      **√âtiquette de Conduite :**
      - Descendez dans les lignes de visibilit√© - attention aux virages aveugles et aux ponts √©troits
      - En file indienne quand il y a du trafic ; c√©dez le passage aux autres dans les points √©troits
      - Attention aux ch√®vres, chutes de pierres et pommes de pin sur la route
      - Les zones humides sous les arbres peuvent √™tre glissantes
      - Pas de drones dans le parc sans permis ; respectez toute la signalisation

      **Contacts d'Urgence :**
      - Services d'urgence : 112 (partagez la position exacte via borne kilom√©trique ou √©pingle WhatsApp)
      - Plan de <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">secours</a> : Assurez-vous d'avoir votre police <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">Mallorca Bike Rescue</a> si le v√©lo ou le corps vous l√¢che.
---

## Aper√ßu

**Parcours :** Port de Pollen√ßa ‚Üí Cap de Formentor (phare) ‚Üí retour

**Distance et d√©nivel√© :** ~38‚Äì42 km, ~1200m de d√©nivel√© total

**Surface :** Bon asphalte ; vues spectaculaires ; un court tunnel √©clair√©

**Temps de trajet (en mouvement) :**
- Fort : 1h45‚Äì2h15
- En forme : 2h15‚Äì3h
- Tranquille : 3h‚Äì4h

**Difficult√© :** Interm√©diaire √† avanc√© (exposition + vent + trafic)

**Meilleur d√©part :** T√¥t ou fin d'apr√®s-midi ; √©vitez le trafic touristique de l'heure du d√©jeuner

## Comment √áa Fonctionne

C'est un parcours aller-retour sur la Ma-2210 avec deux mont√©es et demie principales : 1. la mont√©e du Coll de Sa Creueta au Mirador Es Colomer, puis au retour il y a une courte mont√©e coquine (demi !) depuis le phare et puis de la plage de Formentor au Mirador Es Colomer. Le reste est des montagnes russes de courtes mont√©es et descentes. Attendez-vous √† ce que le voyage retour soit beaucoup plus rapide que l'aller.

Les ajouts optionnels incluent la route lat√©rale tr√®s raide de Talaia d'Albercutx avec une surface irr√©guli√®re (seulement pour les grimpeurs confiants) ou une pause relaxante √† Platja de Formentor.

Si vous s√©journez √† proximit√©, c'est incontournable. Si vous s√©journez plus loin, prenez une <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">navette programm√©e</a> ou r√©servez une <a href="/fr/navette-velo/reservations-navette-privee/" target="_blank" rel="noopener noreferrer">navette priv√©e</a> pour Port de Pollen√ßa.

## D√©coupage par Secteurs

### Port de Pollen√ßa ‚Üí Mirador Es Colomer (Coll de Sa Creueta)

**Distance :** 4 km
**Pente :** ~6‚Äì7% avec √©pingles
**Points forts :** Point de vue c√¥tier spectaculaire au sommet
**Dangers :** Bus touristiques occasionnels
**Sortie de secours :** Aucune jusqu'au sommet

Cette mont√©e initiale pr√©sente des pentes constantes avec des √©pingles √† cheveux sculpt√©es dans la colline. Le point de vue Mirador Es Colomer au sommet offre des vues √† couper le souffle sur les falaises spectaculaires et est un arr√™t photo parfait.

### Mirador ‚Üí Plage de Formentor (Platja de Formentor)

**Distance :** environ 4 km de descente sinueuse
**Pente :** 5-6%
**Points forts :** Paysage c√¥tier, for√™t, descente sinueuse/vertigineuse !
**Dangers :** Sections √©troites, visibilit√© limit√©e dans certains virages
**Nourriture/eau :** Caf√© saisonnier √† la plage (horaires peu fiables, prix √©lev√©s)

La route s'ouvre avec de superbes vues m√©diterran√©ennes dans la descente vers la zone de la plage.

### Plage ‚Üí Phare (Faro de Formentor)

**Distance :** Derni√®re pouss√©e vers le phare 7,5 km
**Pente :** Plusieurs rampes piquantes
**Points forts :** Conduite sur cr√™te expos√©e, vues sur la mer, for√™t, petit vignoble
**Dangers :** Exposition occasionnelle au vent, ch√®vres, la rampe finale mord fort au retour
**Sortie de secours :** Faites demi-tour o√π vous en avez besoin

### Tableau R√©capitulatif des Secteurs

| Secteur | Distance | Temps Typique | Pentes | Dangers Principaux | Sortie/Nourriture |
|---------|----------|--------------|-----------|-------------|---------------|
| Port de Pollen√ßa ‚Üí Mirador | 4 km | 15-25 min | 6-7% | Route √©troite, bus | Aucune |
| Mirador ‚Üí Plage | 4 km | 10 min | 5% | Ros√©e, aiguilles de pin | Plage et caf√© Mirador (saisonnier) |
| Plage ‚Üí Phare | 7-8 km | 20-40 min | Rampes piquantes | Jours venteux, ch√®vres | Tourner √† la plage |
| **Total aller** | ~19-21 km | ~55-100 min | Mixte | Divers | Multiples |
| **Total retour** | ~19-21 km | ~50-90 min | Profil invers√© | M√™me + jambes fatigu√©es | M√™me |

## Carte et Fichiers

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<style>
/* Same CSS as other versions */
.route-accordion {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin: 2rem 0;
}

.route-item {
  border: 1px solid #d2d2d7;
  border-radius: 12px;
  background: #ffffff;
  overflow: hidden;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.06);
}

.route-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.06);
  border-color: rgba(241, 0, 0, 0.2);
}

.route-item.active {
  background: #ffffff;
  border-color: rgba(241, 0, 0, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
}

.route-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  cursor: pointer;
  user-select: none;
  gap: 1rem;
  flex-wrap: wrap;
  background: transparent;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.route-header:hover {
  background: rgba(245, 245, 247, 0.5);
}

.route-item.active .route-header {
  padding-bottom: 1.5rem;
}

.route-item.active .route-header::after {
  content: '‚úï';
  position: absolute;
  top: 1rem;
  right: 1rem;
  font-size: 1.25rem;
  color: #6e6e73;
  font-weight: 600;
  line-height: 1;
  opacity: 0.6;
  transition: opacity 0.2s ease;
}

.route-item.active .route-header:hover::after {
  opacity: 1;
}

.route-title-section {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex: 1;
  min-width: 200px;
}

.route-icon {
  font-size: 1.25rem;
  transition: transform 0.2s ease;
  color: #f10000;
}

.route-item.active .route-icon {
  transform: rotate(90deg);
}

.route-title {
  font-weight: 600;
  font-size: 1.0625rem;
  color: #1d1d1f;
  line-height: 1.3;
}

.route-stats-inline {
  display: flex;
  gap: 0.75rem;
  color: #6e6e73;
  font-size: 0.875rem;
  font-weight: 500;
  flex-wrap: wrap;
  align-items: center;
  margin-top: 0.5rem;
}

.route-stats-inline span {
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.375rem 0.75rem;
  background: #f5f5f7;
  border-radius: 6px;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.route-stats-inline span:hover {
  background: rgba(245, 245, 247, 0.8);
}

.route-actions {
  display: flex;
  gap: 0.5rem;
}

.gpx-download {
  padding: 0.5rem 1rem;
  background: #f5f5f7;
  border: 1px solid #d2d2d7;
  border-radius: 8px;
  font-size: 0.875rem;
  font-weight: 600;
  color: #1d1d1f;
  text-decoration: none;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  white-space: nowrap;
}

.gpx-download:hover {
  background: #f10000;
  color: white;
  border-color: #f10000;
  text-decoration: none;
  transform: translateY(-1px);
}

.route-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.route-item.active .route-content {
  max-height: 2000px;
}

.route-content-inner {
  padding: 0 1.5rem 1.5rem 1.5rem;
}

.route-description {
  margin: 0 0 1.5rem 0;
  padding: 1rem;
  background: #f5f5f7;
  border-left: 3px solid #f10000;
  border-radius: 4px;
  font-style: italic;
  color: #6e6e73;
  line-height: 1.6;
}

.route-map {
  height: 500px;
  width: 100%;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  border: 1px solid #d2d2d7;
  overflow: hidden;
  background: #aad3df;
}

.route-map .leaflet-tile-container {
  opacity: 1 !important;
}

.route-map .leaflet-tile,
.route-map .leaflet-tile-pane img,
.route-map img.leaflet-tile {
  opacity: 1 !important;
  visibility: visible !important;
  width: 256px !important;
  height: 256px !important;
  max-width: 256px !important;
  max-height: 256px !important;
  min-width: 256px !important;
  min-height: 256px !important;
}

.route-map .leaflet-layer {
  opacity: 1 !important;
}

.route-map img {
  max-width: none !important;
  width: auto !important;
  height: auto !important;
}

.route-map .leaflet-overlay-pane {
  z-index: 400 !important;
  pointer-events: none !important;
}

.route-map .leaflet-overlay-pane svg,
.route-map svg.leaflet-zoom-animated {
  overflow: visible !important;
  max-width: none !important;
  max-height: none !important;
  min-width: 0 !important;
  min-height: 0 !important;
  display: block !important;
  position: absolute !important;
}

main .container .prose .route-map svg,
.route-map .leaflet-overlay-pane svg,
.route-map svg {
  max-width: none !important;
  max-height: none !important;
  height: initial !important;
  width: initial !important;
}

.route-map .leaflet-overlay-pane path,
.route-map path.leaflet-interactive,
.route-map svg path,
.route-map path.route-polyline {
  visibility: visible !important;
  display: block !important;
  opacity: 0.8 !important;
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  stroke-opacity: 0.8 !important;
  fill: none !important;
  fill-opacity: 0 !important;
  pointer-events: auto !important;
  vector-effect: non-scaling-stroke !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  transform: none !important;
}

path.route-polyline {
  stroke: #f10000 !important;
  stroke-width: 3px !important;
  visibility: visible !important;
  opacity: 0.8 !important;
}

.route-map .leaflet-marker-icon,
.route-map .leaflet-marker-pane img {
  max-width: none !important;
  min-width: 25px !important;
  min-height: 41px !important;
  width: 25px !important;
  height: 41px !important;
}

.route-map .custom-marker {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.route-map .custom-marker div {
  width: 30px !important;
  height: 30px !important;
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

.elevation-profile {
  height: 300px;
  width: 100%;
  background: white;
  padding: 1rem;
  border-radius: 8px;
  border: 1px solid #d2d2d7;
}

.elevation-profile canvas {
  max-width: 100% !important;
}

@media (max-width: 768px) {
  .route-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .route-stats-inline {
    font-size: 0.8125rem;
  }

  .route-map {
    height: 400px;
  }

  .elevation-profile {
    height: 250px;
  }
}
</style>

<div class="route-accordion">
  <!-- Route 1 -->
  <div class="route-item" id="route-formentor-1">
    <div class="route-header" onclick="toggleRoute('formentor-1')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Port de Pollen√ßa √† Cap de Formentor Aller-Retour</div>
          <div class="route-stats-inline">
            <span>üìè 42 km</span>
            <span>‚õ∞Ô∏è 1200m</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-formentor_return.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Aller-retour classique au phare avec deux sections principales de mont√©e, vues c√¥ti√®res, tunnels courts et cr√™tes expos√©es. La fa√ßon la plus populaire de vivre Cap de Formentor.</p>
        <div id="map-formentor-1" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-formentor-1"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 2 -->
  <div class="route-item" id="route-formentor-2">
    <div class="route-header" onclick="toggleRoute('formentor-2')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Port de Pollen√ßa √† Cap de Formentor via Talaia d'Albercutx</div>
          <div class="route-stats-inline">
            <span>üìè 46 km</span>
            <span>‚õ∞Ô∏è 1450m</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-albercutx-formentor_return.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Variante difficile ajoutant la route lat√©rale tr√®s raide de Talaia d'Albercutx depuis le Mirador Es Colomer. Pr√©sente des pentes de 10-14%+ sur des surfaces rugueuses avec des vues spectaculaires √† 360¬∞. Pour grimpeurs confiants uniquement.</p>
        <div id="map-formentor-2" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-formentor-2"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 3 -->
  <div class="route-item" id="route-formentor-3">
    <div class="route-header" onclick="toggleRoute('formentor-3')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Port de Pollen√ßa via Cap de Formentor √† Playa de Palma</div>
          <div class="route-stats-inline">
            <span>üìè 110 km</span>
            <span>‚õ∞Ô∏è 2300m</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/Port_de_Pollen√ßa_via_Cap_de_Formentor_to_Playa_de_Palma.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Parcours √©pique combinant le spectaculaire phare de Cap de Formentor avec un trajet vers Playa de Palma. Commencez par l'aller-retour embl√©matique de Formentor avant de vous diriger vers le sud √† travers les contreforts de la Tramuntana jusqu'√† la c√¥te.</p>
        <div id="map-formentor-3" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-formentor-3"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Route 4 -->
  <div class="route-item" id="route-formentor-4">
    <div class="route-header" onclick="toggleRoute('formentor-4')">
      <div class="route-title-section">
        <span class="route-icon">‚ñ∂</span>
        <div>
          <div class="route-title">Retour via Cap de Formentor</div>
          <div class="route-stats-inline">
            <span>üìè 162 km</span>
            <span>‚õ∞Ô∏è 3.500 m</span>
            <span style="display: inline-block; padding: 0.375rem 0.875rem; border-radius: 6px; font-size: 0.6875rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; background: #FFD700; color: #000; font-weight: 800;">√âpique</span>
          </div>
        </div>
      </div>
      <div class="route-actions">
        <a href="/routes/portpollenca-portandratx-formentor.gpx" download class="gpx-download" onclick="event.stopPropagation()">‚¨á GPX</a>
      </div>
    </div>
    <div class="route-content">
      <div class="route-content-inner">
        <p class="route-description">Compl√©tez la classique c√¥te √† c√¥te mais incluez ce qui est consid√©r√© par certains comme les meilleurs 20 km de route pour cyclistes en Europe - l'aller-retour au phare de Cap de Formentor. Journ√©e √©pique √† v√©lo !</p>
        <div id="map-formentor-4" class="route-map"></div>
        <div class="elevation-profile">
          <canvas id="chart-formentor-4"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Route configuration
const routes = {
  'formentor-1': { gpx: 'portpollenca-formentor_return-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Faro de Formentor' },
  'formentor-2': { gpx: 'portpollenca-albercutx-formentor_return-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Faro de Formentor' },
  'formentor-3': { gpx: 'Port_de_Pollen√ßa_via_Cap_de_Formentor_to_Playa_de_Palma-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Playa de Palma' },
  'formentor-4': { gpx: 'portpollenca-portandratx-formentor-web.gpx', startName: 'Port de Pollen√ßa', endName: 'Port d\'Andratx' }
};

const loadedRoutes = {};

function toggleRoute(routeId) {
  const item = document.getElementById('route-' + routeId);
  const wasActive = item.classList.contains('active');
  document.querySelectorAll('.route-item').forEach(el => {
    el.classList.remove('active');
  });
  if (!wasActive) {
    item.classList.add('active');
    if (!loadedRoutes[routeId]) {
      loadRoute(routeId);
      loadedRoutes[routeId] = true;
    }
  }
}

async function loadRoute(routeId) {
  const config = routes[routeId];
  if (!config) return;

  try {
    const response = await fetch('/routes/' + config.gpx);
    const gpxText = await response.text();
    const parser = new DOMParser();
    const gpxDoc = parser.parseFromString(gpxText, 'text/xml');

    const trkpts = Array.from(gpxDoc.querySelectorAll('trkpt'));
    const coordinates = trkpts.map(pt => ({
      lat: parseFloat(pt.getAttribute('lat')),
      lon: parseFloat(pt.getAttribute('lon')),
      ele: parseFloat(pt.querySelector('ele').textContent)
    }));

    renderMap(routeId, coordinates, config);
    renderElevationChart(routeId, coordinates);
  } catch (error) {
    console.error('Error loading route:', error);
  }
}

function renderMap(routeId, coordinates, config) {
  const mapId = 'map-' + routeId;
  const map = L.map(mapId).setView([coordinates[0].lat, coordinates[0].lon], 10);

  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors',
    maxZoom: 19
  }).addTo(map);

  const routeLine = L.polyline(coordinates.map(c => [c.lat, c.lon]), {
    color: '#f10000',
    weight: 3,
    opacity: 0.8,
    className: 'route-polyline'
  }).addTo(map);

  const startIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#00ff00;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  const endIcon = L.divIcon({
    html: '<div style="width:30px;height:30px;background:#ff0000;border:3px solid white;border-radius:50%;box-shadow:0 2px 5px rgba(0,0,0,0.3);"></div>',
    className: 'custom-marker',
    iconSize: [30, 30],
    iconAnchor: [15, 15]
  });

  L.marker([coordinates[0].lat, coordinates[0].lon], { icon: startIcon })
    .addTo(map)
    .bindPopup('<strong>D√©part:</strong> ' + config.startName);

  const lastIdx = coordinates.length - 1;
  L.marker([coordinates[lastIdx].lat, coordinates[lastIdx].lon], { icon: endIcon })
    .addTo(map)
    .bindPopup('<strong>Arriv√©e:</strong> ' + config.endName);

  map.fitBounds(routeLine.getBounds(), { padding: [50, 50] });

  setTimeout(() => {
    map.invalidateSize();
  }, 500);
}

function renderElevationChart(routeId, coordinates) {
  const chartId = 'chart-' + routeId;
  const ctx = document.getElementById(chartId).getContext('2d');

  const distancePoints = [0];
  for (let i = 1; i < coordinates.length; i++) {
    const lat1 = coordinates[i-1].lat * Math.PI / 180;
    const lat2 = coordinates[i].lat * Math.PI / 180;
    const dLat = (coordinates[i].lat - coordinates[i-1].lat) * Math.PI / 180;
    const dLon = (coordinates[i].lon - coordinates[i-1].lon) * Math.PI / 180;
    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
              Math.cos(lat1) * Math.cos(lat2) *
              Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    distancePoints.push(distancePoints[i-1] + 6371 * c);
  }

  const sampleRate = 5;
  const sampledDistances = distancePoints.filter((_, i) => i % sampleRate === 0);
  const sampledElevations = coordinates.filter((_, i) => i % sampleRate === 0).map(c => c.ele);

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: sampledDistances.map(d => d.toFixed(1)),
      datasets: [{
        label: 'Altitude (m)',
        data: sampledElevations,
        borderColor: '#f10000',
        backgroundColor: 'rgba(241, 0, 0, 0.1)',
        borderWidth: 2,
        fill: true,
        tension: 0.4,
        pointRadius: 0
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            title: (context) => 'Distance: ' + context[0].label + ' km',
            label: (context) => 'Altitude: ' + context.parsed.y.toFixed(0) + ' m'
          }
        }
      },
      scales: {
        x: {
          title: { display: true, text: 'Distance (km)' },
          ticks: { maxTicksLimit: 15 }
        },
        y: {
          title: { display: true, text: 'Altitude (m)' }
        }
      },
      interaction: {
        intersect: false,
        mode: 'index'
      }
    }
  });
}
</script>

## Strat√©gie de Timing (R√©alit√© Trafic et M√©t√©o)

### Restrictions V√©hiculaires Saisonni√®res

Les restrictions v√©hiculaires saisonni√®res vers le phare s'appliquent de juin √† octobre (pas de voitures au-del√† de certains points, uniquement des bus touristiques toutes les heures) ‚Äì **les cyclistes sont toujours autoris√©s**.

En 2025, les restrictions √©taient en vigueur du 1er juin au 31 octobre. En 2026, il y a un d√©bat en cours sur l'extension des restrictions v√©hiculaires pour inclure mai afin que le pouvoir des p√©dales puisse r√©gner plus longtemps (croisons les doigts !).

## S√©curit√© et √âtiquette

- **√âclairages :** √âclairages avant et arri√®re obligatoires pour les tunnels ; retirez les lunettes de soleil √† l'int√©rieur
- **Descente :** Restez dans les lignes de visibilit√© - attention aux virages aveugles et aux ponts √©troits
- **Dangers routiers :** Attention aux ch√®vres, chutes de pierres, pommes de pin et zones humides sous les arbres
- **Trafic :** En file indienne quand il y a du trafic ; c√©dez le passage aux autres dans les points √©troits
- **Permis :** Pas de drones dans le parc sans permis ; respectez toute la signalisation
- **Urgence :** Appelez le 112 et partagez la position exacte (borne kilom√©trique ou √©pingle de position WhatsApp)
- **Plan de <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">secours</a> :** Assurez-vous d'avoir votre police <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">Mallorca Bike Rescue</a> si le v√©lo ou le corps vous l√¢che

## Eau, Nourriture et Installations

### Port de Pollen√ßa (D√©part/Arriv√©e)
Services complets disponibles : caf√©s, restaurants, supermarch√©s, magasins de v√©los, toilettes.

### Es Mirador (Sommet)
Fonctionnement saisonnier, snacks et boissons de base, portaloo disponible (v√©rifiez les heures d'ouverture pour les toilettes et le caf√© !)

### Plage de Formentor (Platja de Formentor)
H√¥tel/caf√© saisonnier peut √™tre ouvert ; attendez-vous √† des prix √©lev√©s et des horaires variables.

### Caf√© du Phare
Fonctionnement saisonnier ; parfois ferm√© sans pr√©avis par mauvais temps. G√©n√©ralement ouvert de mars √† octobre de 10h00 √† 16h00.

### Strat√©gie Eau
**Ne comptez pas sur les recharges en cours de route au cas o√π les caf√©s seraient ferm√©s.** Commencez avec 2 bidons pleins.

## D√©marrage

Pr√™t √† affronter Cap de Formentor ? Que vous s√©journiez √† Port de Pollen√ßa ou ailleurs sur l'√Æle, une bonne planification fait toute la diff√©rence.

Envisagez de r√©server une <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">Mallorca Cycle Shuttle</a> pour Port de Pollen√ßa si vous √™tes bas√© plus loin. Consultez les <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">bus v√©lo programm√©s</a> pour des horaires de d√©part pratiques.

Et n'oubliez pas d'acheter votre police de <a href="https://mallorcacycleshuttle.company.site/products/Rescue-&-Recovery-c15728236" target="_blank" rel="noopener noreferrer">secours v√©lo</a> avant de rouler ‚Äì tranquillit√© d'esprit pour vous et votre groupe.

Profitez d'un des trajets c√¥tiers les plus spectaculaires de Majorque !
