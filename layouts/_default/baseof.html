<!doctype html>
<html lang="{{ .Site.Language.Lang }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      {{- $t := .Title -}}
      {{- if $t | default "" -}}
        {{ $t }} | {{ .Site.Title }}
      {{- else -}}
        {{ .Site.Title }}
      {{- end -}}
    </title>

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="stylesheet" href="/css/main.css" />
  </head>
  <body>
    <!-- Menu Overlay -->
    <div class="menu-overlay" id="menu-overlay"></div>

    <header class="header">
      <div class="container" style="display:flex; align-items:center; gap:1rem; justify-content:space-between;">
        <!-- Hamburger Menu Button -->
        <button class="hamburger" id="hamburger-btn" aria-label="Toggle menu" style="border:none; cursor:pointer;">
          <span></span>
          <span></span>
          <span></span>
        </button>

        <a href="{{ "/" | relLangURL }}" aria-label="{{ .Site.Title }}" style="display:flex; align-items:center; gap:.75rem;">
          <img src="/img/logo.svg" alt="{{ .Site.Title }}" style="height:32px; width:auto;">
        </a>

        <!-- Language switcher - links on desktop, dropdown on mobile -->
        <nav class="lang-desktop" style="margin-left:auto; margin-right:1rem; display:flex; gap:.75rem;">
          <a href="/en/" {{ if eq .Site.Language.Lang "en" }}class="active"{{ end }}>EN</a>
          <a href="/de/" {{ if eq .Site.Language.Lang "de" }}class="active"{{ end }}>DE</a>
          <a href="/es/" {{ if eq .Site.Language.Lang "es" }}class="active"{{ end }}>ES</a>
          <a href="/it/" {{ if eq .Site.Language.Lang "it" }}class="active"{{ end }}>IT</a>
          <a href="/fr/" {{ if eq .Site.Language.Lang "fr" }}class="active"{{ end }}>FR</a>
          <a href="/ca/" {{ if eq .Site.Language.Lang "ca" }}class="active"{{ end }}>CA</a>
        </nav>
        <select class="lang-mobile" onchange="if(this.value) window.location.href=this.value" style="margin-left:auto; margin-right:1rem; padding:0.5rem; border-radius:5px; border:1px solid #dee2e6; background:white; cursor:pointer; display:none;">
          <option value="/en/" {{ if eq .Site.Language.Lang "en" }}selected{{ end }}>EN</option>
          <option value="/de/" {{ if eq .Site.Language.Lang "de" }}selected{{ end }}>DE</option>
          <option value="/es/" {{ if eq .Site.Language.Lang "es" }}selected{{ end }}>ES</option>
          <option value="/it/" {{ if eq .Site.Language.Lang "it" }}selected{{ end }}>IT</option>
          <option value="/fr/" {{ if eq .Site.Language.Lang "fr" }}selected{{ end }}>FR</option>
          <option value="/ca/" {{ if eq .Site.Language.Lang "ca" }}selected{{ end }}>CA</option>
        </select>

        <!-- Buy Rescue Button -->
        <a href="{{ if eq .Site.Language.Lang "en" }}https://mallorcacycleshuttle.company.site/products/{{ else if eq .Site.Language.Lang "de" }}https://mallorcacycleshuttle.company.site/de/products/{{ else if eq .Site.Language.Lang "es" }}https://mallorcacycleshuttle.company.site/es/products/{{ else if eq .Site.Language.Lang "it" }}https://mallorcacycleshuttle.company.site/it/products/{{ else if eq .Site.Language.Lang "fr" }}https://mallorcacycleshuttle.company.site/fr/products/{{ else if eq .Site.Language.Lang "ca" }}https://mallorcacycleshuttle.company.site/ca/products/{{ end }}"
           style="background:#f00000; color:white; padding:0.5rem 1rem; border-radius:5px; text-decoration:none; font-weight:600; white-space:nowrap;">
          {{ i18n "buy_rescue" }}
        </a>
      </div>

      <!-- Mobile Navigation Menu -->
      <nav class="mobile-nav" id="mobile-nav">
        <div class="mobile-nav-content">
          {{ if eq .Site.Language.Lang "en" }}
          <a href="/en/home">Home</a>
          <a href="/en/bike-rescue/rescue-home/">Bike Rescue</a>
          <a href="/en/mallorca-airport-transfers/">Airport Transfers</a>
          <div class="menu-item-with-submenu">
            <span class="menu-parent">Guides</span>
            <div class="submenu">
              <a href="/en/bike-shuttle/andratx-pollenca-guide/">Andratx-Pollença Guide</a>
              <a href="/en/bike-shuttle/big-daddy-challenge/">Big Daddy Challenge</a>
              <a href="/en/bike-shuttle/sa-calobra-guide/">Sa Calobra Guide</a>
            </div>
          </div>
          <a href="https://mallorcacycleshuttle.company.site/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">Shuttle Schedule</a>
          <a href="/en/about/about-us">About Us</a>
          <a href="/en/about/blog/">Blog</a>
          {{ else if eq .Site.Language.Lang "de" }}
          <a href="/de/startseite">Startseite</a>
          <a href="/de/bike-rescue/rescue-home/">Fahrrad-Rettung</a>
          <a href="/de/mallorca-flughafentransfers/">Flughafentransfers</a>
          <div class="menu-item-with-submenu">
            <span class="menu-parent">Leitfäden</span>
            <div class="submenu">
              <a href="/de/bike-shuttle/andratx-pollenca-leitfaden/">Andratx-Pollença Leitfaden</a>
              <a href="/de/bike-shuttle/big-daddy-challenge/">Big Daddy Challenge</a>
              <a href="/de/bike-shuttle/sa-calobra-leitfaden/">Sa Calobra Leitfaden</a>
            </div>
          </div>
          <a href="https://mallorcacycleshuttle.company.site/de/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">Shuttle-Fahrplan</a>
          <a href="/de/about/ueber-uns">Über uns</a>
          <a href="/de/about/blog/">Blog</a>
          {{ else if eq .Site.Language.Lang "es" }}
          <a href="/es/inicio">Inicio</a>
          <a href="/es/bike-rescue/rescue-home/">Rescate de Bicicletas</a>
          <a href="/es/traslados-aeropuerto-mallorca/">Traslados al Aeropuerto</a>
          <div class="menu-item-with-submenu">
            <span class="menu-parent">Guías</span>
            <div class="submenu">
              <a href="/es/bike-shuttle/guia-andratx-pollenca/">Guía Andratx-Pollença</a>
              <a href="/es/bike-shuttle/big-daddy-challenge/">Big Daddy Challenge</a>
              <a href="/es/bike-shuttle/guia-sa-calobra/">Guía Sa Calobra</a>
            </div>
          </div>
          <a href="https://mallorcacycleshuttle.company.site/es/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">Horarios Shuttle</a>
          <a href="/es/about/sobre-nosotros">Sobre Nosotros</a>
          <a href="/es/about/blog/">Blog</a>
          {{ else if eq .Site.Language.Lang "it" }}
          <a href="/it/home">Home</a>
          <a href="/it/soccorso-ciclisti/home-soccorso/">Soccorso Ciclisti</a>
          <a href="/it/transfer-aeroporto-mallorca/">Transfer Aeroporto</a>
          <div class="menu-item-with-submenu">
            <span class="menu-parent">Guide</span>
            <div class="submenu">
              <a href="/it/shuttle-bici/guida-andratx-pollenca/">Guida Andratx-Pollença</a>
              <a href="/it/shuttle-bici/big-daddy-challenge/">Big Daddy Challenge</a>
              <a href="/it/shuttle-bici/guida-sa-calobra/">Guida Sa Calobra</a>
            </div>
          </div>
          <a href="https://mallorcacycleshuttle.company.site/it/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">Orari Shuttle</a>
          <a href="/it/chi-siamo/chi-siamo">Chi Siamo</a>
          <a href="/it/chi-siamo/blog/">Blog</a>
          {{ else if eq .Site.Language.Lang "fr" }}
          <a href="/fr/accueil">Accueil</a>
          <a href="/fr/bike-rescue/rescue-home/">Secours Vélo</a>
          <a href="/fr/transferts-aeroport-mallorca/">Transferts Aéroport</a>
          <div class="menu-item-with-submenu">
            <span class="menu-parent">Guides</span>
            <div class="submenu">
              <a href="/fr/bike-shuttle/guide-andratx-pollenca/">Guide Andratx-Pollença</a>
              <a href="/fr/bike-shuttle/defi-big-daddy/">Défi Big Daddy</a>
              <a href="/fr/bike-shuttle/guide-sa-calobra/">Guide Sa Calobra</a>
            </div>
          </div>
          <a href="https://mallorcacycleshuttle.company.site/fr/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">Horaires Navette</a>
          <a href="/fr/about/a-propos-de-nous">À Propos</a>
          <a href="/fr/about/blog/">Blog</a>
          {{ else if eq .Site.Language.Lang "ca" }}
          <a href="/ca/inici">Inici</a>
          <a href="/ca/rescat-ciclistes/inici-rescat/">Rescat Ciclistes</a>
          <a href="/ca/trasllats-aeroport-mallorca/">Trasllats Aeroport</a>
          <div class="menu-item-with-submenu">
            <span class="menu-parent">Guies</span>
            <div class="submenu">
              <a href="/ca/shuttle-bici/guia-andratx-pollenca/">Guia Andratx-Pollença</a>
              <a href="/ca/shuttle-bici/big-daddy-challenge/">Big Daddy Challenge</a>
              <a href="/ca/shuttle-bici/guia-sa-calobra/">Guia Sa Calobra</a>
            </div>
          </div>
          <a href="https://mallorcacycleshuttle.company.site/ca/products/Scheduled-Bike-Buses-c15728235" target="_blank" rel="noopener noreferrer">Horaris Shuttle</a>
          <a href="/ca/sobre/sobre-nosaltres">Sobre Nosaltres</a>
          <a href="/ca/sobre/blog/">Blog</a>
          {{ end }}
        </div>
      </nav>
    </header>

    <main>
      {{ block "main" . }}{{ .Content }}{{ end }}
    </main>

    <footer class="footer">
      <div class="container footer-grid" style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:3rem;">
        <div class="small footer-contact">
          <strong>{{ i18n "contact" }}</strong><br>
          Mallorca Bicycle Rescue · <a href="mailto:admin@mallorcacycleshuttle.com">admin@mallorcacycleshuttle.com</a><br/>
          Autocares Devesa SL CIF B08359606<br/>
          Calle Fuster 36 a, 07460 Pollença<br/>
          © {{ now.Year }} Mallorca Bicycle Rescue
        </div>

        <div class="footer-logo" style="display:flex; align-items:center; justify-content:center;">
          <a href="https://mallorcacycleshuttle.com" target="_blank" rel="noopener noreferrer">
            <img src="/img/MCScategoryslanted.png" alt="Mallorca Cycle Shuttle" style="max-width:200px; height:auto;">
          </a>
        </div>

        <div class="small footer-legal">
          <strong>{{ i18n "legal" }}</strong><br>
          {{ with .Site.Menus.legal }}
            {{ range . }}
              <a href="{{ .URL | relLangURL }}">{{ .Name }}</a><br/>
            {{ end }}
          {{ end }}
        </div>
      </div>
    </footer>

    {{/* Cookie Consent Banner */}}
    {{ partial "cookie-consent.html" . }}
    {{ partial "cookie-consent-script.html" . }}

    {{/* Hamburger Menu Script */}}
    <script>
      (function() {
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const mobileNav = document.getElementById('mobile-nav');
        const menuOverlay = document.getElementById('menu-overlay');

        function toggleMenu() {
          hamburgerBtn.classList.toggle('active');
          mobileNav.classList.toggle('active');
          menuOverlay.classList.toggle('active');
          document.body.style.overflow = mobileNav.classList.contains('active') ? 'hidden' : '';
        }

        function closeMenu() {
          hamburgerBtn.classList.remove('active');
          mobileNav.classList.remove('active');
          menuOverlay.classList.remove('active');
          document.body.style.overflow = '';
        }

        if (hamburgerBtn && mobileNav && menuOverlay) {
          hamburgerBtn.addEventListener('click', toggleMenu);
          menuOverlay.addEventListener('click', closeMenu);

          // Close menu when clicking a link
          const navLinks = mobileNav.querySelectorAll('a');
          navLinks.forEach(link => {
            link.addEventListener('click', closeMenu);
          });
        }
      })();
    </script>
  </body>
</html>
